"use strict";(self.webpackChunkjupyter_drives=self.webpackChunkjupyter_drives||[]).push([[280],{280:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var i=a(379),n=a(327),r=a(196),s=a(727),o=a(700),l=a(476),d=a(470),c=a(345),m=a(180);function p(e){return c.createElement("div",null,c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},c.createElement(m.Search,{className:"drive-search-input",onInput:e.getValue})),c.createElement("div",{className:"column"}),c.createElement(m.Button,{className:"input-add-drive-button",onClick:()=>{e.updateSelectedDrives(e.value,e.isName)}},"add drive")))}function h(e){return c.createElement("div",{className:"drive-search-list"},c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},c.createElement(m.Search,{className:"drive-search-input",onInput:e.filter})),c.createElement("div",{className:"column"})),e.filteredList.map(((t,a)=>c.createElement("li",{key:t},c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},c.createElement("div",null,t," ")),c.createElement("div",{className:"column"},c.createElement(m.Button,{className:"search-add-drive-button",onClick:()=>{e.updateSelectedDrives(t,!0)}},"add drive")))))))}function u(e){return c.createElement("div",{className:"drive-data-grid"},c.createElement(m.DataGrid,{"grid-template-columns":"1f 1fr"},c.createElement(m.DataGridRow,{"row-type":"header"},c.createElement(m.DataGridCell,{className:"data-grid-cell","grid-column":"1"},c.createElement("b",null," name ")),c.createElement(m.DataGridCell,{className:"data-grid-cell","grid-column":"2"},c.createElement("b",null," url "))),e.drives.map(((e,t)=>c.createElement(m.DataGridRow,{key:e.name,"row-type":"default"},c.createElement(m.DataGridCell,{className:"data-grid-cell","grid-column":"1"},e.name),c.createElement(m.DataGridCell,{className:"data-grid-cell","grid-column":"2"},e.url))))))}function v(e){const[t,a]=(0,c.useState)(""),[i,n]=(0,c.useState)("");let r=[...e.model.selectedDrives];const[s,o]=(0,c.useState)(r),l=[];for(const t of e.model.availableDrives)""!==t.name&&l.push(t.name);const[d,m]=(0,c.useState)(l),v=(i,n)=>{let s;r=[...e.model.selectedDrives],n?s={name:i,url:""}:(i!==t&&a(i),s={name:"",url:t});const l=((e,t)=>{const a=[],i=[];let n=!1;return t.forEach((t=>{""!==e.name&&e.name===t.name?a.push(!0):a.push(!1),""!==e.url&&e.url===t.url?i.push(!0):i.push(!1)})),(a.includes(!0)||i.includes(!0))&&(n=!0),n})(s,r);!1===l?r.push(s):console.log("The selected drive is already in the list"),o(r),e.model.setSelectedDrives(r)};return c.createElement(c.Fragment,null,c.createElement("div",{className:"drive-list-manager"},c.createElement("div",null,c.createElement("h3",null," Select drive(s) to be added to your filebrowser ")),c.createElement("div",{className:"row"},c.createElement("div",{className:"column"},c.createElement("div",null," Enter a drive URL"),c.createElement(p,{isName:!1,value:t,getValue:e=>{a(e.target.value)},updateSelectedDrives:(e,t)=>v(e,t)}),c.createElement("div",null," Select drive(s) from list"),c.createElement(h,{isName:!0,value:i,filteredList:d,filter:e=>{const t=e.target.value;let i;i=[...l],i=i.filter((e=>-1!==e.toLowerCase().indexOf(t.toLowerCase()))),m(i),1===d.length&&""!==d[0]&&(n(d[0]),a(""))},updateSelectedDrives:(e,t)=>v(e,t)})),c.createElement("div",{className:"column"},c.createElement("div",{className:"jp-custom-datagrid"},c.createElement("label",null," Selected drives "),c.createElement("label",null," "),c.createElement(u,{drives:s}))))))}class y extends d.VDomModel{constructor(e,t){super(),this.availableDrives=e,this.selectedDrives=t}setSelectedDrives(e){this.selectedDrives=e}}class g extends d.VDomRenderer{constructor(e){super(e),this.model=e}render(){return c.createElement(c.Fragment,null,c.createElement(v,{model:this.model}))}}const w=new d.LabIcon({name:"jupyter-drives:drive",svgstr:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\n\n<svg\n   viewBox="0 0 24 16"\n   width="16"\n   version="1.1"\n   id="svg619"\n   height="16"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg">\n  <defs\n     id="defs623" />\n  <g\n     class="jp-icon3"\n     fill="#616161"\n     id="g617"\n     transform="matrix(1.1651014,0,0,1.1651014,-0.76608721,-3.7597785)"\n     style="stroke:none;stroke-width:2.15904;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n    <g\n       id="g266"\n       transform="matrix(0.04,0,0,0.04,-0.05616541,0.0448711)"\n       style="stroke:none;stroke-width:53.976;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n      <g\n         id="g140"\n         style="stroke:none;stroke-width:66.8504;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n        <g\n           id="g138"\n           style="stroke:none;stroke-width:66.8504;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      </g>\n      <g\n         id="g152"\n         style="stroke:none;stroke-width:66.8504;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n        <g\n           id="g150"\n           style="stroke:none;stroke-width:66.8504;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      </g>\n      <rect\n         style="fill:#999999;fill-opacity:1;stroke:none;stroke-width:66.8504;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         id="rect3165"\n         width="514.97662"\n         height="514.97662"\n         x="17.842344"\n         y="-6.2762976" />\n      <text\n         xml:space="preserve"\n         style="font-style:normal;font-weight:normal;font-size:577.866px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;stroke:none;stroke-width:779.774"\n         x="18.662781"\n         y="484.6319"\n         id="text8569"\n         transform="scale(1.0907066,0.91683685)"><tspan\n           id="tspan8567"\n           style="stroke-width:779.774"\n           x="18.662781"\n           y="484.6319">D</tspan></text>\n    </g>\n  </g>\n</svg>\n'}),f=new d.LabIcon({name:"jupyter-drives:drive-browser",svgstr:'<svg \n    xmlns="http://www.w3.org/2000/svg"\n    height="34" viewBox="0 -960 960 960"\n    width="34"\n    >\n    <path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H260Z"\n    fill = "#616161"\n    />\n</svg>'});var b=a(602),x=a(192),E=a(439);const _=new(a(262).Token)("jupyter-drives:drives-list-provider");function T(e,t){let a="text",i="text/plain",n="text";return t[e]&&(a=t[e].fileType,i=t[e].fileMimeTypes[0],n=t[e].fileFormat),".ipynb"===e&&(n="text"),[a,i,n]}function F(e,t){return t.filter((t=>t.name===(-1!==e.indexOf("/")?e.substring(0,e.indexOf("/")):e)))[0]}function D(e){return-1!==e.indexOf("/")?e.substring(e.indexOf("/")+1):""}class k extends x.ServerConnection.ResponseError{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,a="",i={}){super(e,t),this.traceback=a,this._json=null!=i?i:{}}get json(){return this._json}}async function P(e="",t="GET",a=null,i="jupyter-drives"){const n=x.ServerConnection.makeSettings(),r=E.URLExt.join(n.baseUrl,i,e),s={method:t,body:a?JSON.stringify(a):void 0};let o;try{o=await x.ServerConnection.makeRequest(r,s,n)}catch(e){throw new x.ServerConnection.NetworkError(e)}let l=await o.text(),d=!1;if(l.length>0)try{l=JSON.parse(l),d=!0}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok){if(d){const{message:e,traceback:t,...a}=l;throw new k(o,e||`Invalid response: ${o.status} ${o.statusText}`,t||"",a)}throw new k(o,l)}return l}let S={name:"",path:"",last_modified:"",created:"",content:null,format:null,mimetype:"",size:0,writable:!0,type:""};async function C(e,t){const a=await P("drives/"+e+"/"+t.path,"GET"),i=void 0!==a.data.length;if(a.data)if(i){const i={};a.data.forEach((a=>{var n;if(a.path!==t.path&&a.path!==t.path+"/"){const r=a.path.replace(t.path?t.path+"/":"","").split("/")[0],[s,o,l]=T(E.PathExt.extname(E.PathExt.basename(r)),t.registeredFileTypes);i[r]=null!==(n=i[r])&&void 0!==n?n:{name:r,path:t.path?E.PathExt.join(e,t.path,r):E.PathExt.join(e,r),last_modified:a.last_modified,created:"",content:r.split(".")[1]?null:[],format:l,mimetype:o,size:a.size,writable:!0,type:s}}})),S={name:t.path?E.PathExt.basename(t.path):e,path:E.PathExt.join(e,t.path?t.path+"/":""),last_modified:"",created:"",content:Object.values(i),format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"}}else{const[i,n,r]=T(E.PathExt.extname(E.PathExt.basename(t.path)),t.registeredFileTypes);S={name:E.PathExt.basename(t.path),path:E.PathExt.join(e,a.data.path),last_modified:a.data.last_modified,created:"",content:a.data.content,format:r,mimetype:n,size:a.data.size,writable:!0,type:i}}return S}var j;!function(e){e.deleteSingleObject=async function(e,t){await P("drives/"+e+"/"+t,"DELETE")},e.renameSingleObject=async function(e,t,a){return await P("drives/"+e+"/"+t,"PATCH",{new_path:a})},e.copySingleObject=async function(e,t,a,i){return await P("drives/"+e+"/"+a,"PUT",{to_path:i,to_drive:t})}}(j||(j={}));let N={name:"",path:"",last_modified:"",created:"",content:[],format:null,mimetype:"",size:0,writable:!0,type:""};class L{constructor(e={}){var t,a;this._drivesList=[],this._name="",this._provider="",this._baseUrl="",this._region="",this._creationDate="",this._fileChanged=new b.Signal(this),this._isDisposed=!1,this._disposed=new b.Signal(this),this._registeredFileTypes={},this._serverSettings=x.ServerConnection.makeSettings(),this._name=null!==(t=e.name)&&void 0!==t?t:"",this._drivesList=null!==(a=e.drivesList)&&void 0!==a?a:[]}get drivesList(){return this._drivesList}set drivesList(e){this._drivesList=e}get baseUrl(){return this._baseUrl}set baseUrl(e){this._baseUrl=e}get name(){return this._name}set name(e){this._name=e}get provider(){return this._provider}set provider(e){this._provider=e}get region(){return this._region}set region(e){this._region=e}get creationDate(){return this._creationDate}set creationDate(e){this._creationDate=e}get serverSettings(){return this._serverSettings}get registeredFileTypes(){return this._registeredFileTypes}set registeredFileTypes(e){this._registeredFileTypes=e}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),b.Signal.clearData(this))}async getDownloadUrl(e){let t="";if(""!==e){const a=F(e,this._drivesList);t=await(async(e,t)=>(await P("drives/"+e+"/"+t.path,"PUT",{presigned_link:!0})).data.link)(a.name,{path:D(e)})}else console.warn("Operation not supported.");return t}async get(e,t){if(""!==e){const t=F(e,this._drivesList);if(!1===t.mounted)try{await async function(e,t){const a={drive_name:e,provider:t.provider,region:t.region};return await P("drives","POST",a)}(e,{provider:t.provider,region:t.region}),this._drivesList.filter((t=>t.name===e))[0].mounted=!0}catch(e){}N=await C(t.name,{path:D(e),registeredFileTypes:this._registeredFileTypes})}else{const e=[];for(const t of this._drivesList)e.push({name:t.name,path:t.name,last_modified:"",created:t.creationDate,content:[],format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"});N={name:this._name,path:this._name,last_modified:"",created:"",content:e,format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"}}return x.Contents.validateContentsModel(N),N}async newUntitled(e={}){var t;const a=null!==(t=e.path)&&void 0!==t?t:"";if(""!==a){const t=F(a,this._drivesList),i=-1!==a.indexOf("/")?a.substring(a.indexOf("/")+1):"",n=await C(t.name,{path:i,registeredFileTypes:this._registeredFileTypes});if(void 0!==e.type){const a=this.incrementUntitledName(n,e);N=await async function(e,t){const a=t.path?E.PathExt.join(t.path,t.name):t.name,i=await P("drives/"+e+"/"+a,"POST"),[n,r,s]=T(E.PathExt.extname(t.name),t.registeredFileTypes);return S={name:t.name,path:E.PathExt.join(e,a),last_modified:i.data.last_modified,created:i.data.last_modified,content:i.data.content,format:s,mimetype:r,size:i.data.size,writable:!0,type:n},S}(t.name,{name:a,path:i,registeredFileTypes:this._registeredFileTypes})}else console.warn("Type of new element is undefined")}else console.warn("Operation not supported.");return x.Contents.validateContentsModel(N),this._fileChanged.emit({type:"new",oldValue:null,newValue:N}),N}incrementUntitledName(e,t){const a=e.content;let i="",n=0,r=0,s=0;return"notebook"===t.type&&(t.ext="ipynb"),a.forEach((e=>{void 0!==t.ext?e.name.includes("untitled")&&e.name.includes(".txt")?n+=1:e.name.includes("Untitled")&&e.name.includes(".ipynb")&&(s+=1):e.name.includes("Untitled Folder")&&(r+=1)})),"txt"===t.ext&&(i=0===n?"untitled."+t.ext:"untitled"+n+"."+t.ext),"ipynb"===t.ext?i=0===s?"Untitled."+t.ext:"Untitled"+s+"."+t.ext:"directory"===t.type&&(i=0===r?"Untitled Folder":"Untitled Folder "+r),i}async delete(e){if(""!==e){const t=F(e,this._drivesList);await async function(e,t){const a=await P("drives/"+e+"/"+t.path,"GET");void 0!==a.data.length&&0!==a.data.length&&await Promise.all(a.data.map((async t=>j.deleteSingleObject(e,t.path))));try{return j.deleteSingleObject(e,t.path)}catch(e){}}(t.name,{path:D(e)})}else console.warn("Operation not supported.");this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t,a={}){if(""!==e){const a=F(e,this._drivesList),i=D(e),n=D(t);let r=E.PathExt.basename(n);try{await async function(e,t){await P("drives/"+e+"/"+t.path,"HEAD")}(a.name,{path:n}),r=await this.incrementName(n,a.name)}catch(e){}finally{N=await async function(e,t){const a=t.newPath.substring(0,t.newPath.lastIndexOf("/")+1)+t.newFileName,[i,n,r]=T(E.PathExt.extname(E.PathExt.basename(t.newFileName)),t.registeredFileTypes),s=await P("drives/"+e+"/"+t.path,"GET");void 0!==s.data.length&&0!==s.data.length&&await Promise.all(s.data.map((async i=>{const n=i.path.substring(t.path.length);j.renameSingleObject(e,E.PathExt.join(t.path,n),E.PathExt.join(a,n))})));try{const s=await j.renameSingleObject(e,t.path,a);S={name:t.newFileName,path:E.PathExt.join(e,a),last_modified:s.data.last_modified,created:"",content:""!==E.PathExt.extname(t.newFileName)?null:[],format:r,mimetype:n,size:s.data.size,writable:!0,type:i}}catch(e){}return S}(a.name,{path:i,newPath:n,newFileName:r,registeredFileTypes:this._registeredFileTypes})}}else console.warn("Operation not supported.");return x.Contents.validateContentsModel(N),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:N}),N}async incrementName(e,t){let a="",i="";i=E.PathExt.basename(e),a=E.PathExt.extname(i),i=""!==a?i.split(".")[i.split(".").length-2]:i;const n=await(async(e,t,a)=>{let i=0;t=t.substring(0,t.lastIndexOf("/"));const n=await P("drives/"+e+"/"+t,"GET");return n.data&&0!==n.data.length&&n.data.forEach((e=>{e.path.replace(t?t+"/":"","").split("/")[0].substring(0,a.length+1).includes(a)&&(i+=1)})),i})(t,e,i);let r=n?i+n:i;return r=""!==a?r+a:r,r}async save(e,t={}){if(""!==e){const a=F(e,this._drivesList);N=await async function(e,t){const[a,i,n]=T(E.PathExt.extname(E.PathExt.basename(t.path)),t.registeredFileTypes),r=await P("drives/"+e+"/"+t.path,"PUT",{content:t.param.content,options_format:t.param.format,content_format:n,content_type:a});return S={name:E.PathExt.basename(t.path),path:E.PathExt.join(e,t.path),last_modified:r.data.last_modified,created:r.data.last_modified,content:r.data.content,format:n,mimetype:i,size:r.data.size,writable:!0,type:a},S}(a.name,{path:D(e),param:t,registeredFileTypes:this._registeredFileTypes})}else console.warn("Operation not supported.");return x.Contents.validateContentsModel(N),this._fileChanged.emit({type:"save",oldValue:null,newValue:N}),N}async incrementCopyName(e,t,a){const i=E.PathExt.basename(e),n=""===E.PathExt.extname(i)?i+"-Copy":i.split(".")[0]+"-Copy."+i.split(".")[1],r=E.PathExt.join(t,n);return await this.incrementName(r,a)}async copy(e,t,a={}){if(""!==e){const a=F(e,this._drivesList),i=F(t,this._drivesList),n=D(e),r=D(t),s=await this.incrementCopyName(n,r,i.name);N=await async function(e,t){const a=E.PathExt.join(t.toPath,t.newFileName),[i,n,r]=T(E.PathExt.extname(E.PathExt.basename(t.newFileName)),t.registeredFileTypes),s=await P("drives/"+e+"/"+t.path,"GET");void 0!==s.data.length&&0!==s.data.length&&await Promise.all(s.data.map((async i=>{const n=i.path.substring(t.path.length);j.copySingleObject(e,t.toDrive,E.PathExt.join(t.path,n),E.PathExt.join(a,n))})));try{const s=await j.copySingleObject(e,t.toDrive,t.path,a);S={name:t.newFileName,path:E.PathExt.join(t.toDrive,a),last_modified:s.data.last_modified,created:"",content:""!==E.PathExt.extname(t.newFileName)?null:[],format:r,mimetype:n,size:s.data.size,writable:!0,type:i}}catch(e){}return S}(a.name,{path:n,toPath:r,newFileName:s,toDrive:i.name,registeredFileTypes:this._registeredFileTypes})}else console.warn("Operation not supported.");return this._fileChanged.emit({type:"new",oldValue:null,newValue:N}),x.Contents.validateContentsModel(N),N}createCheckpoint(e){return Promise.resolve({id:"",last_modified:""})}listCheckpoints(e){return Promise.resolve([])}restoreCheckpoint(e,t){return Promise.reject("Repository is read only")}deleteCheckpoint(e,t){return Promise.reject("Read only")}getRegisteredFileTypes(e){const t=e.docRegistry.fileTypes();for(const e of t)0===e.extensions.length&&(this._registeredFileTypes[""]={fileType:"directory",fileFormat:"json",fileMimeTypes:["text/directory"]}),e.extensions.forEach((t=>{var a;this._registeredFileTypes[t]||(this._registeredFileTypes[t]={fileType:e.name,fileMimeTypes:[...e.mimeTypes],fileFormat:null!==(a=e.fileFormat)&&void 0!==a?a:""})}))}}var O;!function(e){e.openDrivesDialog="drives:open-drives-dialog",e.openPath="drives:open-path",e.toggleBrowser="drives:toggle-main"}(O||(O={}));const U="DriveBrowser",R={id:"jupyter-drives:widget",description:"Open a dialog to select drives to be added in the filebrowser.",requires:[n.IFileBrowserFactory,r.ITranslator],autoStart:!0,activate:(e,t,a)=>{(0,s.addJupyterLabThemeChangeListener)();const{commands:i}=e,{tracker:n}=t,r=a.load("jupyter_drives"),l=new Map;let d=[{name:"CoconutDrive",url:"/coconut/url"}];const c=[{name:"CoconutDrive",url:"/coconut/url"},{name:"PearDrive",url:"/pear/url"},{name:"StrawberryDrive",url:"/strawberrydrive/url"},{name:"BlueberryDrive",url:"/blueberrydrive/url"},{name:"",url:"/mydrive/url"},{name:"RaspberryDrive",url:"/raspberrydrive/url"},{name:"PineAppleDrive",url:""},{name:"PomeloDrive",url:"/https://pomelodrive/url"},{name:"OrangeDrive",url:""},{name:"TomatoDrive",url:""},{name:"",url:"superDrive/url"},{name:"AvocadoDrive",url:""}];let m=l.get(d);i.addCommand(O.openDrivesDialog,{execute:e=>{const t=n.currentWidget;m?(d=m.selectedDrives,l.set(d,m)):(m=new y(c,d),l.set(d,m)),t&&m&&(0,o.showDialog)({body:new g(m),buttons:[o.Dialog.cancelButton()]})},icon:w.bindprops({stylesheet:"menuItem"}),caption:r.__("Add drives to filebrowser."),label:r.__("Add Drives To Filebrowser")})}},z={id:"jupyter-drives:drives-list",description:"The drives list provider.",provides:_,activate:async e=>{const t=[];try{const e=await async function(){return await P("drives","GET")}();for(const a of e.data)t.push({name:a.name,region:a.region,provider:a.provider,creationDate:a.creation_date,mounted:a.mounted})}catch(e){console.log("Failed loading available drives list, with error: ",e)}return t}},B={id:"jupyter-drives:drives-file-browser",description:"The drive file browser factory provider.",autoStart:!0,requires:[n.IFileBrowserFactory,o.IToolbarWidgetRegistry,l.ISettingRegistry,r.ITranslator,_],optional:[i.IRouter,i.JupyterFrontEnd.ITreeResolver,i.ILabShell,i.ILayoutRestorer],activate:async(e,t,a,i,r,s,l,c,m,p)=>{console.log("JupyterLab extension jupyter-drives:drives-file-browser is activated!");const{commands:h}=e,u=new L({name:"s3",drivesList:s});e.serviceManager.contents.addDrive(u),u.getRegisteredFileTypes(e);const v=t.createFileBrowser("drivebrowser",{auto:!1,restore:!1,driveName:u.name});function y(e){!async function(e){await P("drives/config","POST",{new_limit:e})}(e.get("maxFilesListed").composite)}v.node.setAttribute("role","region"),v.node.setAttribute("aria-label","Drive Browser Section"),v.title.icon=f,v.title.caption="Drive File Browser",v.id="Drive-File-Browser",G.restoreBrowser(v,h,l,c,m),e.shell.add(v,"left",{rank:102,type:"File Browser"}),p&&p.add(v,"drive-file-browser"),a.addFactory(U,"uploader",(e=>new n.Uploader({model:e.model,translator:r}))),a.addFactory(U,"file-name-searcher",(e=>{const t=(0,d.FilenameSearcher)({updateFilter:(t,a)=>{e.model.setFilter((e=>t(e.name.toLowerCase())))},useFuzzyFilter:!0,placeholder:"Filter files by names",forceRefresh:!0});return t.addClass("jp-drive-browser-search-box"),t})),(0,o.setToolbar)(v,(0,o.createToolbarFactory)(a,i,U,B.id,r)),Promise.all([e.restored,i.load(B.id)]).then((([,e])=>{y(e),e.changed.connect(y)})).catch((e=>{console.error(`Something went wrong when reading the settings.\n${e}`)}))}},I=[B,z,R];var G;!function(e){e.restoreBrowser=async function(e,t,a,i,n){const r="jp-mod-restoring";if(e.addClass(r),!a)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(r);const s=async()=>{a.routed.disconnect(s);const o=await(null==i?void 0:i.paths);(null==o?void 0:o.file)||(null==o?void 0:o.browser)?(await e.model.restore(e.id,!1),o.file&&await t.execute(O.openPath,{path:o.file,dontShowBrowser:!0}),o.browser&&await t.execute(O.openPath,{path:o.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(r),(null==n?void 0:n.isEmpty("main"))&&t.execute("launcher:create")};a.routed.connect(s)}}(G||(G={}))}}]);