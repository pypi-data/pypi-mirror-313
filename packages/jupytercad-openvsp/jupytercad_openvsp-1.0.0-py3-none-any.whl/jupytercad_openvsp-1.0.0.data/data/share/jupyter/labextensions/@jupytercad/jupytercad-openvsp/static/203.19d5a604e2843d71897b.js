"use strict";(self.webpackChunk_jupytercad_jupytercad_openvsp=self.webpackChunk_jupytercad_jupytercad_openvsp||[]).push([[203],{203:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var s=r(922),a=r(257),o=r(700),n=r(61);class c{constructor(){this.collaborative=!0,this._disposed=!1}get name(){return"jupytercad-vspmodel"}get contentType(){return"vsp"}get fileFormat(){return"text"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return new a.JupyterCadModel({sharedModel:e.sharedModel,languagePreference:e.languagePreference})}}var d=r(262),i=r(602);class p extends a.JupyterCadDoc{constructor(){super(),this.editable=!1,this.toJcadEndpoint="jupytercad/export-ovsp",this._sourceObserver=e=>{const t=[];e.forEach((e=>{e.keys.forEach(((r,s)=>{t.push({name:"OpenVSP File",key:s,newValue:d.JSONExt.deepCopy(e.target.toJSON())})}))})),this._objectChanged.emit({objectChange:t}),this._changed.emit({objectChange:t})},this._objectChanged=new i.Signal(this),this._source=this.ydoc.getText("source"),this._source.observeDeep(this._sourceObserver)}get version(){return"0.1.0"}get objectsChanged(){return this._objectChanged}get objects(){return this._source.toJSON()?[{name:"OpenVSP File",visible:!0,shape:"Part::Any",parameters:{Content:this._source.toJSON(),Type:"STL"}}]:[]}static create(){return new p}}const u={id:"jupytercad_openvsp:plugin",description:"A JupyterCAD extension for OpenVSP",autoStart:!0,requires:[a.IJupyterCadDocTracker,o.IThemeManager,a.IJCadWorkerRegistryToken,a.IJCadExternalCommandRegistryToken,s.ICollaborativeDrive],activate:(e,t,r,s,a,o)=>{const d=new n.JupyterCadWidgetFactory({name:"JupyterCAD VSP3 Viewer",modelName:"jupytercad-vspmodel",fileTypes:["vsp"],defaultFor:["vsp"],tracker:t,commands:e.commands,workerRegistry:s,externalCommandRegistry:a});e.docRegistry.addWidgetFactory(d);const i=new c;e.docRegistry.addModelFactory(i),e.docRegistry.addFileType({name:"vsp",displayName:"VSP",mimeTypes:["text/json"],extensions:[".vsp3",".VSP3"],fileFormat:"text",contentType:"vsp"});o&&o.sharedModelFactory.registerDocumentFactory("vsp",(()=>new p)),d.widgetCreated.connect(((s,a)=>{a.context.pathChanged.connect((()=>{t.save(a)})),r.themeChanged.connect(((e,t)=>a.context.model.themeChanged.emit(t))),t.add(a),e.shell.activateById("jupytercad::leftControlPanel")})),console.log("jupytercad_openvsp:plugin is activated!")}}}}]);