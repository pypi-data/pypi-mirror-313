import{_ as e,u as t,i as a,c as n,o,a as i,b as s,t as r,N as l,O as c,q as d,e as m,w as u,g as p,f as v,P as f,m as g,y as h,B as y,A as b,Q as x,F as _,J as $,H as w,r as j,T as S}from"./index-cl6TV9LT.js";import{u as k}from"./experiment-CnJIySGM.js";import{_ as C}from"./SLLoading-DHekZNjC.js";const L={class:"text-xl font-semibold"},V={class:"relative pt-4"},E={class:"font-semibold pb-3"},I=["placeholder"],q={class:"tip text-negative-default"},B={class:"relative"},U={class:"font-semibold pt-5 pb-3"},D=["placeholder"],N={class:"tip text-negative-default"},z={class:"flex justify-end pt-10"},A=100,F=255,H=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:b}){const x=t(),_=k(),$=e,w=b,j=a({name:"project"===$.type?x.name:_.name,description:"project"===$.type?x.description:_.description}),S=a({name:"",description:""}),H=n((()=>!(j.value.name.length>A))),J=n((()=>{var e;return!j.value.description||!((null==(e=j.value.description)?void 0:e.length)>F)})),O=a(!1),P=async()=>{if(S.value={name:"",description:""},"project"===$.type&&!H.value)return g.warning(h("common.config-editor.error.project_name")),S.value.name=h("common.config-editor.error.name");if(!H.value)return g.warning(h("common.config-editor.error.experiment_name")),S.value.name=h("common.config-editor.error.name");if(!J.value)return g.warning(h("common.config-editor.error.description")),S.value.description=h("common.config-editor.error.description");if(j.value.name.trim()===x.name&&j.value.description===x.description)return S.value.name=h("common.config-editor.error.project_change");if(j.value.name.trim()===_.name&&j.value.description===_.description)return S.value.name=h("common.config-editor.error.experiment_change");let e=!1;"experiment"===$.type&&x.experiments.forEach((t=>{j.value.name===t.name&&j.value.name!==_.name&&(e=!0,S.value.name=h("common.config-editor.error.experiment_duplicated"))})),e||(O.value=!0,w("confirm",j.value,(()=>{O.value=!1,g.success(h("common.config-editor.save.success"))})))};return(t,a)=>{var n;const g=y;return o(),i("form",{class:"w-full",onSubmit:f(P,["prevent"])},[s("h1",L,r(t.$t(`common.config-editor.title.${e.type}`)),1),s("div",V,[s("h2",E,r(t.$t(`common.config-editor.sub-title.${e.type}.name`)),1),l(s("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>j.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:A,pattern:"^(?!\\s+$).*$",required:""},null,8,I),[[c,j.value.name]]),s("p",{class:d(["absolute bottom-[-20px] text-xs right-0",0===j.value.name.length||j.value.name.length===A?"text-negative-default":""])},r(`${j.value.name.length} / 100`),3),s("span",q,r(S.value.name),1)]),s("div",B,[s("h2",U,r(t.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),l(s("textarea",{class:"input",rows:"10","onUpdate:modelValue":a[1]||(a[1]=e=>j.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:F},null,8,D),[[c,j.value.description]]),s("p",{class:d(["absolute bottom-[-20px] text-xs right-0",(null==(n=j.value.description)?void 0:n.length)===F?"text-negative-default":""])},r(`${j.value.description?j.value.description.length:0} / 255`),3),s("span",N,r(S.value.description),1)]),s("div",z,[m(g,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:O.value},{default:u((()=>[O.value?(o(),p(C,{key:0,size:"4"})):v("",!0),s("span",null,r(t.$t("common.config-editor.save."+(O.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-052f7e40"]]),J={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:t}){const n=a(!1),s=t,r=async(e,t)=>{s("modify",e,(()=>{n.value=!1,t()}))};return(t,a)=>{const s=y;return o(),i(_,null,[m(s,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":t.$t("common.config-editor.not-allowed"),onClick:a[0]||(a[0]=e=>n.value=!0)},{default:u((()=>[m(b,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),m(x,{class:"px-10 py-6","max-w":"550",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e)},{default:u((()=>[m(H,{type:e.type,onConfirm:r},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},O={class:"text-sm flex items-center gap-2"},P={class:"md:block hidden"},Q=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:t}){const a=e,n=t,i=()=>{$(h(`common.delete.title.${a.type}`),h(`common.delete.content.${a.type}`),{}).then((()=>{n("confirm")}))};return(e,t)=>(o(),p(y,{onClick:i,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:u((()=>[s("div",O,[m(b,{icon:"trash",class:"w-4 h-4"}),s("span",P,r(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-41907065"]]),T=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},url:{type:String,default:""}},setup(e){const t=w(),a=e,i=n((()=>{let e,t;switch(a.status){case 0:e="running",t="circle-fill";break;case 1:e="finished",t="success";break;case-1:e="crashed",t="error"}if(!e)throw new Error("Invalid status:"+a.status+"in StatusLabel.vue");return{class:e,icon:t}})),s=n((()=>a.url?"a":"div")),r=()=>{a.url&&t.push(a.url)};return(t,a)=>{const n=b;return o(),p(S(s.value),{class:d(["sl-status-label",i.value.class]),href:e.url,onClick:f(r,["prevent"])},{default:u((()=>[m(n,{icon:i.value.icon},null,8,["icon"]),j(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","href"])}}},[["__scopeId","data-v-b6e5701f"]]);export{Q as D,J as _,T as a};
