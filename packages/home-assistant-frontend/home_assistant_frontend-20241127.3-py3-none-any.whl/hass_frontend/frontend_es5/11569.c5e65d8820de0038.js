"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11569"],{17712:function(t,e,n){n.r(e);var a,r,i=n(9833),o=n(94524),s=n(63038),c=n(27862),d=n(52565),u=n(92776),l=n(5776),h=n(21475),f=n(77204),p=(n(52247),n(38419),n(71695),n(42713),n(99341),n(47021),n(72700),n(8038),n(71513),n(75656),n(50100),n(18084),n(57243)),k=n(50778),b=(n(68424),n(29095),n(96194)),v=n(58014),m=n(72473),w=(0,h.Z)(null,(function(t,e){var n,h=function(e){function n(){var e;(0,d.Z)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=(0,u.Z)(this,n,[].concat(r)),t(e),e}return(0,l.Z)(n,e),(0,c.Z)(n)}(e);return{F:h,d:[{kind:"field",decorators:[(0,k.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_attached",value:function(){return!1}},{kind:"field",decorators:[(0,k.SB)()],key:"_waiting",value:function(){return!1}},{kind:"method",key:"connectedCallback",value:function(){(0,f.Z)(h,"connectedCallback",this,3)([]),this._attached=!0}},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.Z)(h,"disconnectedCallback",this,3)([]),this._attached=!1}},{kind:"method",key:"render",value:function(){return this._attached&&this.stateObj?(0,p.dy)(a||(a=(0,s.Z)([' <ha-camera-stream .hass="','" .stateObj="','" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="','" .progress="','" .disabled="','"> '," </ha-progress-button> </div> "])),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===b.nZ,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):p.Ld}},{kind:"method",key:"_downloadSnapshot",value:(n=(0,o.Z)((0,i.Z)().mark((function t(e){var n,a,r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.currentTarget,this._waiting=!0,t.prev=2,t.next=5,this.hass.callApiRaw("GET","camera_proxy/".concat(this.stateObj.entity_id));case 5:if(a=t.sent){t.next=8;break}throw new Error("No response from API");case 8:return t.next=10,a.blob();case 10:r=t.sent,o=window.URL.createObjectURL(r),(0,v.N)(o),t.next=21;break;case 15:return t.prev=15,t.t0=t.catch(2),this._waiting=!1,n.actionError(),(0,m.C)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")}),t.abrupt("return");case 21:this._waiting=!1,n.actionSuccess();case 23:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(t){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(r||(r=(0,s.Z)([":host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:12px;z-index:1;gap:8px}"])))}}]}}),p.oi);customElements.define("more-info-camera",w)},58014:function(t,e,n){n.d(e,{G:function(){return i},N:function(){return r}});var a=n("18117"),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.target="_blank",n.href=t,n.download=e,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)},i=function(t){var e;return!function(t){return!!t.auth.external&&a.G}(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},18117:function(t,e,n){n.d(e,{G:function(){return a}});n(19134),n(5740);var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=11569.c5e65d8820de0038.js.map