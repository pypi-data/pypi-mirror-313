import{ay as T,a1 as p,az as v,v as d,b as w}from"./index-7270317d.js";import{M as m}from"./file-6e50569b.js";const I=new Worker(new URL("/assets/sqlglot-8774d74c.js",self.location));function L(){return new Worker(new URL("/assets/lineage-233ef759.js",self.location),{type:"module"})}const[h,b]=T("tabs"),{tabs:S=[],id:y}=h()??{},l=u(),c=f(l),x=new Map([[l,c]]),g=p((a,n)=>({storedTabs:S,storedTabId:y,tab:c,tabs:x,engine:I,dialects:[],previewQuery:void 0,previewTable:void 0,previewDiff:void 0,direction:"vertical",inTabs(e){return n().tabs.has(e)},replaceTab(e,s){const t=n(),i=Array.from(t.tabs.entries()),r=i.findIndex(([o])=>o===e.file);i[r]=[s.file,s],a(()=>({tabs:new Map(i)})),t.updateStoredTabsIds()},updateStoredTabsIds(){const e=n();if(d(e.tab)){b({id:void 0,tabs:[]}),a(()=>({storedTabId:void 0,storedTabs:[]}));return}const s=[];for(const i of e.tabs.values())w(i.file.isChanged)&&i.file.isLocal||s.push({id:i.file.id,content:i.file.content});const t=e.tab.file.isChanged||e.tab.file.isRemote?e.tab.file.id:void 0;b({id:t,tabs:s}),a(()=>({storedTabId:t,storedTabs:s}))},refreshTab(e){d(e)||n().selectTab({...e})},setDialects(e){a(()=>({dialects:e}))},selectTab(e){const s=n();a(()=>({tab:e})),s.updateStoredTabsIds()},addTabs(e){const s=n();for(const t of e)s.tabs.set(t.file,t);a(()=>({tabs:new Map(s.tabs)}))},addTab(e){const s=n();if(s.tabs.has(e.file))s.tabs.set(e.file,e),a(()=>({tabs:new Map(s.tabs)}));else{const t=Array.from(s.tabs.entries()),i=t.findIndex(([r])=>{var o;return r===((o=s.tab)==null?void 0:o.file)});t.splice(i<0?t.length:i+1,0,[e.file,e]),a(()=>({tabs:new Map(t)}))}s.updateStoredTabsIds()},closeTab(e){var t;const s=n();if(e.removeChanges(),s.tabs.delete(e),s.tabs.size===0)s.selectTab(void 0);else if(s.tabs.size===1){const i=Array.from(s.tabs.values());s.selectTab(i.at(0))}else if(e.id===((t=s.tab)==null?void 0:t.file.id)){const i=Array.from(s.tabs.values()),r=i.findIndex(o=>o.file===e);s.selectTab(i.at(r-1))}a(()=>({tabs:new Map(s.tabs)})),s.updateStoredTabsIds()},createTab:f,setPreviewQuery(e){a(()=>({previewQuery:e}))},setPreviewTable(e){a(()=>({previewTable:e}))},setPreviewDiff(e){a(()=>({previewDiff:e}))},setDirection(e){a(()=>({direction:e}))}}));function f(a=u()){return{id:v(),file:a,isValid:!0}}function u(a){return new m({id:a,name:"",path:"",content:`-- Create arbitrary SQL queries
-- and execute them against different environments

`})}export{L as a,u as c,I as s,g as u};
