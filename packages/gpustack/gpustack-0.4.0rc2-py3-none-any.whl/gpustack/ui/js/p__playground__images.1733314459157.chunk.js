"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3560],{17485:function(e,a,n){n.d(a,{Z:function(){return o}});var t=n(35453),r=n(50959),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},s=n(52273),i=function(e,a){return r.createElement(s.Z,(0,t.Z)({},e,{ref:a,icon:l}))};var o=r.forwardRef(i)},49918:function(e,a,n){var t=n(26068),r=n.n(t),l=n(48305),s=n.n(l),i=n(16850),o=n(16333),u=n(90515),c=n(99178),d=n(1956),p=n(85885),m=n(50959),f=n(11527),v="bash",h="python",g="javascript",x=[{label:"Curl",value:v},{label:"Python",value:h},{label:"JavaScript",value:g}];a.Z=function(e){var a=e||{},n=a.title,t=a.open,l=a.onCancel,b=a.payload,y=a.parameters,j=void 0===y?{}:y,w=a.api,z=a.logcommand,C=(0,c.useIntl)(),Z=(0,m.useState)(""),k=s()(Z,2),S=k[0],_=k[1],N=(0,m.useState)(v),M=s()(N,2),I=M[0],L=M[1],q="".concat(window.location.origin).concat(w);return(0,m.useEffect)((function(){!function(){if(I===v){var e="curl ".concat(window.location.origin).concat(w,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n-d \'').concat(JSON.stringify(r()(r()({},j),b),null,2),"'");_(e)}else if(I===g){var a=r()(r()({},j),b),n="import axios from 'axios';\n\nconst url = \"".concat(q,'";\n\nconst headers = ').concat(JSON.stringify({"Content-type":"application/json",Authorization:"Bearer ${YOUR_GPUSTACK_API_KEY}"},null,2),";\n\nconst data = ").concat(JSON.stringify(a,null,2),";\n\naxios.post(url, data, { headers }).then((response) => {\n  console.log(response.").concat(z.node,");\n});");_(n)}else if(I===h){var t=r()(r()({},j),b),l='import requests\n\nurl="'.concat(q,'"\n\nheaders = ').concat(JSON.stringify({"Content-type":"application/json",Authorization:"Bearer ${YOUR_GPUSTACK_API_KEY}"},null,2),"\n\ndata=").concat(JSON.stringify(t,null,2).replace(/null/g,"None"),"\n\nresponse = requests.post(url, headers=headers, json=data)\n\nprint(response.").concat(z.python,")");_(l)}}()}),[I,j,b]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(d.Z,{title:n,open:t,centered:!0,onCancel:function(){L(v),l()},destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:[(0,f.jsx)("div",{style:{marginBottom:"10px"},children:C.formatMessage({id:"playground.viewcode.info"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(i.Z,{copyText:S,langOptions:x,defaultValue:v,showHeader:!0,onChangeLang:function(e){L(e)},styles:{wrapper:{backgroundColor:"var(--color-editor-dark)"}},children:(0,f.jsx)(o.Z,{height:380,theme:"dark",code:S,lang:I,copyable:!1})}),(0,f.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"baseline"},children:[(0,f.jsx)(u.Z,{className:"m-r-8"}),(0,f.jsx)("span",{children:C.formatMessage({id:"playground.viewcode.tips"},{here:(0,f.jsx)(p.ZP,{type:"link",size:"small",href:"#/api-keys",target:"_blank",style:{paddingInline:2},children:(0,f.jsxs)("span",{children:[" ",C.formatMessage({id:"playground.viewcode.here"})]})})})})]})]})]})})}},22471:function(e,a,n){n.d(a,{Ci:function(){return o},FM:function(){return l},GF:function(){return i},I_:function(){return t},JY:function(){return r},QU:function(){return s}});var t=[{type:"Select",name:"voice",options:[],label:{text:"playground.params.voice",isLocalized:!0},rules:[{required:!0,message:"Voice is required"}]},{type:"Select",name:"response_format",options:[{label:"mp3",value:"mp3"},{label:"wav",value:"wav"}],label:{text:"playground.params.format",isLocalized:!0},rules:[{required:!1}]}],r=[{type:"Select",name:"language",options:[{label:"Auto",value:"auto"},{label:"English",value:"en"},{label:"中文",value:"zh"},{label:"日本語",value:"ja"},{label:"Français",value:"fr"},{label:"Deutsch",value:"de"}],label:{text:"playground.params.language",isLocalized:!0},rules:[{required:!0}]}],l=[{type:"InputNumber",name:"n",label:{text:"playground.params.counts",isLocalized:!0},attrs:{min:1,max:4},rules:[{required:!1}]},{type:"Select",name:"size",options:[{label:"playground.params.custom",value:"custom",locale:!0},{label:"256x256",value:"256x256"},{label:"512x512",value:"512x512"},{label:"1024x1024",value:"1024x1024"}],description:{text:"playground.params.size.description",html:!0,isLocalized:!0},label:{text:"playground.params.size",isLocalized:!0},rules:[{required:!1}]}],s=[{type:"Select",name:"quality",options:[{label:"playground.params.standard",value:"standard",locale:!0},{label:"playground.params.hd",value:"hd",locale:!0}],label:{text:"playground.params.quality",isLocalized:!0},rules:[{required:!1}]},{type:"Select",name:"style",options:[{label:"playground.params.style.vivid",value:"vivid",locale:!0},{label:"playground.params.style.natural",value:"natural",locale:!0}],attrs:{allowClear:!0},label:{text:"playground.params.style",isLocalized:!0},rules:[{required:!1}]}],i=[{type:"Select",name:"sampler",options:[{label:"euler_a",value:"euler_a"},{label:"euler",value:"euler"},{label:"heun",value:"heun"},{label:"dpm2",value:"dpm2"},{label:"dpm++2s_a",value:"dpm++2s_a"},{label:"dpm++2m",value:"dpm++2m"},{label:"dpm++2mv2",value:"dpm++2mv2"},{label:"ipndm",value:"ipndm"},{label:"ipndm_v",value:"ipndm_v"},{label:"lcm",value:"lcm"}],label:{text:"playground.image.params.sampler",isLocalized:!0},rules:[{required:!1}]},{type:"Select",name:"schedule",options:[{label:"discrete",value:"discrete"},{label:"karras",value:"karras"},{label:"exponential",value:"exponential"},{label:"ays",value:"ays"},{label:"gits",value:"gits"}],label:{text:"playground.image.params.schedule",isLocalized:!0},rules:[{required:!1}]},{type:"InputNumber",name:"sample_steps",label:{text:"playground.image.params.samplerSteps",isLocalized:!0},attrs:{min:1,max:100},rules:[{required:!1}]},{type:"InputNumber",name:"cfg_scale",label:{text:"CFG Scale",isLocalized:!1},attrs:{min:1,max:10,step:.1},rules:[{required:!1}]},{type:"Input",name:"negative_prompt",label:{text:"playground.image.params.negativePrompt",isLocalized:!0},rules:[{required:!1}]},{type:"InputNumber",name:"seed",label:{text:"playground.image.params.seed",isLocalized:!0},attrs:{min:0},disabledConfig:{depends:["random_seed"],when:function(e){return null==e?void 0:e.random_seed}},rules:[{required:!1}]},{type:"Checkbox",name:"random_seed",label:{text:"playground.image.params.randomseed",isLocalized:!0},rules:[{required:!1}]}],o=[{type:"Slider",name:"width",label:{text:"playground.params.width",isLocalized:!0},attrs:{min:256,max:1024,step:64,inputnumber:!1},rules:[{required:!0,message:"playground.params.width"}]},{type:"Slider",name:"height",label:{text:"playground.params.height",isLocalized:!0},attrs:{min:256,max:1024,step:64,inputnumber:!1},rules:[{required:!0,message:"playground.params.height"}]}]},2221:function(e,a,n){n.r(a),n.d(a,{default:function(){return fe}});var t=n(90228),r=n.n(t),l=n(87999),s=n.n(l),i=n(48305),o=n.n(i),u=n(83057),c=n(35445),d=n(93495),p=n(55592),m=n(55169),f=n(99178),v=n(54235),h=n(85885),g=n(82187),x=n.n(g),b=n(32699),y=n.n(b),j=n(50959),w=n(94299),z=n(35014),C=n(15558),Z=n.n(C),k=n(26068),S=n.n(k),_=n(49662),N=n(67825),M=n.n(N),I=n(88641),L=n(83603),q=n(92233),E=n(42779),F=n(13770),P=n(4423),O=n(68476),R=n(23333),A=n(40474),T=n(96247),U=n(75489),V="slider-label___rGKKE",H=n(11527),J=["label","value","required","description","isInFormItems","max","min","step","defaultValue","checkStatus","inputnumber","labelWidth","tooltip"],B=function(e){var a=e.label,n=e.value,t=e.required,r=e.description,l=e.isInFormItems,s=void 0===l||l,i=e.max,o=e.min,u=e.step,c=e.defaultValue,d=e.checkStatus,p=e.inputnumber,m=void 0!==p&&p,f=e.labelWidth,v=e.tooltip,h=void 0===v?{open:!1}:v,g=M()(e,J),x="";if(s){var b,y,w=null===O.Z||void 0===O.Z||null===(b=O.Z.Item)||void 0===b||null===(y=b.useStatus)||void 0===y?void 0:y.call(b);x=(null==w?void 0:w.status)||""}var z=function(a){var n,t=a||0;null===(n=e.onChange)||void 0===n||n.call(e,t)},C=j.useMemo((function(){return(0,H.jsxs)("span",{className:V,style:{width:f||F.d.mini},children:[(0,H.jsx)("span",{className:"text",children:r?(0,H.jsxs)(R.Z,{title:r,children:[(0,H.jsxs)("span",{children:[" ",a]}),(0,H.jsx)("span",{className:"m-l-5",children:(0,H.jsx)(P.Z,{})})]}):(0,H.jsx)("span",{children:a})}),m?(0,H.jsx)(A.Z,{className:"label-val",variant:"outlined",size:"small",value:n,controls:!1,onChange:z}):(0,H.jsx)("span",{className:"val",children:n})]})}),[a,f,r,n,i,o,u,c]);return(0,H.jsx)(U.Z,{required:t,status:d||x,label:C,style:{padding:"20px 2px 0"},variant:"borderless",children:(0,H.jsx)(T.Z,S()(S()({},g),{},{defaultValue:c,max:i,min:o,step:u,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:h,value:n,onChange:function(a){var n;null===(n=e.onChange)||void 0===n||n.call(e,a)}}))})},G={InputNumber:q.Z.Number,Select:E.Z,Slider:B,TextArea:q.Z.TextArea,Input:q.Z.Input,Checkbox:L.Z},W=["type","label","attrs","style","value"],Y=function(e){var a=(0,f.useIntl)(),n=e.type,t=e.label,r=e.attrs,l=e.style,s=e.value,i=M()(e,W),o=(0,j.useCallback)((function(n){return"Checkbox"===n?(0,H.jsx)(I.Z,{required:e.required,label:t.isLocalized?a.formatMessage({id:t.text}):t.text}):null}),[a,n]),u=(0,j.useMemo)((function(){return"Checkbox"===n?{checked:s}:{value:s}}),[n,s]);return j.createElement(G[n],S()(S()(S()(S()({},i),r),u),{},{style:S()(S()({},l),{},{width:"100%"}),label:t.isLocalized?a.formatMessage({id:t.text}):t.text}),o(n))},K=j.memo(Y),D=n(571),$=n(38852),Q=n(71239),X=n(81117),ee=n(17485),ae=n(67201),ne=n(76571),te=(n(72183),n(9298)),re=n(22471),le=(n(51662),n(21435),n(76483)),se=n(26598),ie=n(19748),oe=n(49918),ue={seed:null,sampler:"euler_a",cfg_scale:4.5,sample_steps:10,negative_prompt:null,schedule:"discrete"},ce={quality:"standard",style:null},de=S()({n:1,size:"512x512"},ue),pe=(0,j.forwardRef)((function(e,a){var n,t=e.modelList,l=(0,j.useRef)(0),i=(0,j.useState)(!1),c=o()(i,2),d=c[0],p=c[1],m=(0,j.useState)([]),v=o()(m,2),g=v[0],b=v[1],w=(0,f.useIntl)(),C=(0,f.useSearchParams)(),k=o()(C,1)[0].get("model")||"",N=(0,j.useState)({}),M=o()(N,2),I=M[0],L=M[1],q=(0,j.useState)(!1),F=o()(q,2),P=F[0],A=F[1],T=(0,j.useState)(!1),U=o()(T,2),V=U[0],J=U[1],B=(0,j.useState)(null),G=o()(B,2),W=G[0],Y=G[1],pe=(0,j.useState)(!1),me=o()(pe,2),fe=me[0],ve=me[1],he=(0,j.useRef)(null),ge=(0,j.useRef)(null),xe=(0,j.useRef)(0),be=(0,j.useRef)(null),ye=(0,j.useState)(""),je=o()(ye,2),we=je[0],ze=je[1],Ce=(0,j.useRef)(null),Ze=(0,j.useRef)(null),ke=O.Z.useWatch("size",null===(n=Ce.current)||void 0===n?void 0:n.form),Se=(0,D.Z)(),_e=Se.initialize,Ne=Se.updateScrollerPosition,Me=(0,D.Z)().initialize;(0,j.useImperativeHandle)(a,(function(){return{viewCode:function(){A(!0)},setCollapse:function(){ve(!fe)},collapse:fe}}));var Ie=(0,j.useCallback)((function(){var e,a,n,t=(a=0,n=te.ce.length-1,Math.floor(Math.random()*(n-a+1)+a)),r=te.ce[t];null===(e=Ze.current)||void 0===e||e.handleInputChange({target:{value:r}})}),[]),Le=(0,j.useCallback)((function(){var e={span:12};return 1===I.n&&(e.span=24),2===I.n&&(e.span=12),3===I.n&&(e.span=12),4===I.n&&(e.span=12),e}),[I.n]),qe=(0,j.useMemo)((function(){return"custom"===I.size?S()(S()({},y().omit(I,["width","height"])),{},{size:I.width&&I.height?"".concat(I.width,"x").concat(I.height):""}):S()({},y().omit(I,["width","height","random_seed"]))}),[I]),Ee=function(){return l.current=l.current+1,l.current},Fe=function(){var e=s()(r()().mark((function e(a){var n,t,l,s,i,o,u,c,d,p,m,f,v,h,g;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=Ce.current)||void 0===n||null===(n=n.form)||void 0===n?void 0:n.validateFields();case 3:if(I.model){e.next=5;break}return e.abrupt("return");case 5:return i=Le(),J(!0),Ee(),Y(null),ze((null==a?void 0:a.content)||""),o=y().split(qe.size,"x"),u=Array(I.n).fill({}).map((function(e,a){return S()(S()({dataUrl:"data:image/png;base64,"},i),{},{progress:0,height:o[1],width:o[0],loading:!0,uid:Ee()})})),b(u),null===(t=be.current)||void 0===t||null===(l=t.abort)||void 0===l||l.call(t),be.current=new AbortController,c=S()(S()({},y().omitBy(qe,(function(e){return!e}))),{},{seed:I.random_seed?(0,Q.Hq)():I.seed,stream:!0,stream_options:{chunk_size:16384,chunk_results:!0},prompt:(null==a?void 0:a.content)||we||""}),L(S()(S()({},I),{},{seed:c.seed})),null===(s=Ce.current)||void 0===s||null===(s=s.form)||void 0===s||s.setFieldValue("seed",c.seed),e.next=20,(0,X.U3)({data:c,url:"".concat(z.U$,"?t=").concat(Date.now()),signal:be.current.signal});case 20:if(!(d=e.sent).error){e.next=25;break}return Y({error:!0,errorMessage:(null==d||null===(p=d.data)||void 0===p||null===(p=p.error)||void 0===p?void 0:p.message)||(null==d||null===(m=d.data)||void 0===m?void 0:m.error)||""}),b([]),e.abrupt("return");case 25:return f=d.reader,v=d.decoder,e.next=28,(0,X.YT)(f,v,(function(e){var a,n;null!=e&&e.error?Y({error:!0,errorMessage:(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||""}):(null==e||null===(a=e.data)||void 0===a||a.forEach((function(e){var a=u[e.index];e.b64_json&&(a.dataUrl+=e.b64_json);var n=y().round(e.progress,0);u[e.index]={dataUrl:a.dataUrl,height:o[1],width:o[0],maxHeight:"".concat(o[1],"px"),maxWidth:"".concat(o[0],"px"),uid:a.uid,span:a.span,loading:n<100,progress:n}})),b(Z()(u)))}));case 28:e.next=35;break;case 30:e.prev=30,e.t0=e.catch(0),null===(h=be.current)||void 0===h||null===(g=h.abort)||void 0===g||g.call(h),b([]);case 35:return e.prev=35,J(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,30,35,38]])})));return function(a){return e.apply(this,arguments)}}(),Pe=function(){A(!1)},Oe=(0,j.useMemo)((function(){return d?re.QU.map((function(e){return(0,H.jsx)(O.Z.Item,{name:e.name,rules:e.rules,children:(0,H.jsx)(E.Z,S()(S()({},e.attrs),{},{options:e.options,label:e.label.isLocalized?w.formatMessage({id:e.label.text}):e.label.text}))},e.name)})):[]}),[re.QU,d,w]),Re=function(e){var a;e.target.id.indexOf("random_seed")&&(null===(a=Ce.current)||void 0===a||null===(a=a.form)||void 0===a||a.setFieldValue("random_seed",e.target.checked))},Ae=(0,j.useMemo)((function(){var e;if(d)return[];var a=null===(e=Ce.current)||void 0===e||null===(e=e.form)||void 0===e?void 0:e.getFieldsValue();return re.GF.map((function(e){var n,t;return(0,H.jsx)(O.Z.Item,{name:e.name,rules:e.rules,noStyle:"random_seed"===e.name,children:(0,H.jsx)(K,S()({style:"random_seed"===e.name?{marginBottom:20}:{},disabled:e.disabledConfig?null===(n=e.disabledConfig)||void 0===n||null===(t=n.when)||void 0===t?void 0:t.call(n,a):e.disabled,onChange:"random_seed"===e.name?Re:null},y().omit(e,["name","rules","disabledConfig"])))},e.name)}))}),[re.GF,d,w,Ce.current]),Te=(0,j.useMemo)((function(){return"custom"===ke?re.Ci.map((function(e){var a,n;return(0,H.jsx)(O.Z.Item,{name:e.name,rules:[{message:w.formatMessage({id:"common.form.rule.input"},{name:w.formatMessage({id:e.label.text})}),required:!0}],children:(0,H.jsx)(K,S()(S()({label:e.label.isLocalized?w.formatMessage({id:e.label.text}):e.label.text,description:null!==(a=e.description)&&void 0!==a&&a.isLocalized?w.formatMessage({id:e.description.text}):null===(n=e.description)||void 0===n?void 0:n.text},e.attrs),y().omit(e,["name","description","rules","disabledConfig"])))},e.name)})):null}),[ke,w]);return(0,j.useEffect)((function(){return function(){var e,a;null===(e=be.current)||void 0===e||null===(a=e.abort)||void 0===a||a.call(e)}}),[]),(0,j.useEffect)((function(){var e;"custom"===ke&&(null===(e=Ce.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue({width:512,height:512}),L((function(e){return S()(S()({},e),{},{width:512,height:512})})))}),[ke]),(0,j.useEffect)((function(){he.current&&_e(he.current)}),[he.current,_e]),(0,j.useEffect)((function(){ge.current&&Me(ge.current)}),[ge.current,Me]),(0,j.useEffect)((function(){V&&Ne()}),[g,V]),(0,j.useEffect)((function(){g.length>xe.current&&Ne(),xe.current=g.length}),[g.length]),(0,H.jsxs)("div",{className:"ground-left-wrapper",children:[(0,H.jsxs)("div",{className:"ground-left",children:[(0,H.jsx)("div",{className:"message-list-wrap",ref:he,style:{paddingBottom:16},children:(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)("div",{className:"content",style:{height:"100%"},children:[(0,H.jsx)($.Z,{style:{padding:0,height:"100%",justifyContent:"center",flexDirection:"column",flexWrap:"unset",alignItems:"center"},autoBgColor:!1,editable:!1,dataList:g,loading:V,responseable:!0,gutter:[8,16],autoSize:!0}),!g.length&&(0,H.jsxs)("div",{className:"flex-column font-size-14 flex-center gap-20 justify-center hold-wrapper",children:[(0,H.jsx)("span",{children:(0,H.jsx)(ee.Z,{className:"font-size-32 text-secondary"})}),(0,H.jsx)("span",{children:w.formatMessage({id:"playground.params.empty.tips"})})]})]})})}),W&&(0,H.jsx)("div",{style:{height:40},children:(0,H.jsx)(_.Z,{type:"danger",message:null==W?void 0:W.errorMessage})}),(0,H.jsx)("div",{className:"ground-left-footer",children:(0,H.jsx)(se.Z,{ref:Ze,placeholer:w.formatMessage({id:"playground.input.prompt.holder"}),actions:["clear"],defaultSize:{minRows:5,maxRows:5},loading:V,disabled:!I.model,isEmpty:!g.length,handleSubmit:function(e){var a=e.content?e:void 0;Fe(a)},handleAbortFetch:function(){var e,a;null===(e=be.current)||void 0===e||null===(a=e.abort)||void 0===a||a.call(e),J(!1)},shouldResetMessage:!1,clearAll:function(){Ee(),b([]),Y(null)},tools:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("span",{className:"font-600",children:w.formatMessage({id:"playground.image.prompt"})}),(0,H.jsx)(ne.Z,{type:"vertical"}),(0,H.jsx)(R.Z,{title:w.formatMessage({id:"playground.image.prompt.random"}),children:(0,H.jsx)(h.ZP,{onClick:Ie,size:"middle",type:"text",icon:(0,H.jsx)(u.Z,{type:"icon-random"})})})]})})})]}),(0,H.jsx)("div",{className:x()("params-wrapper",{collapsed:fe}),ref:ge,children:(0,H.jsx)("div",{className:"box",children:(0,H.jsx)(le.Z,{ref:Ce,parametersTitle:(0,H.jsxs)("div",{className:"flex-between flex-center",children:[(0,H.jsx)("span",{children:w.formatMessage({id:"playground.parameters"})}),(0,H.jsx)(R.Z,{title:w.formatMessage({id:"playground.image.params.custom.tips"}),children:(0,H.jsx)(h.ZP,{size:"middle",type:"text",icon:(0,H.jsx)(ae.Z,{}),onClick:function(){var e,a;d?(null===(e=Ce.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue(S()({},ue)),L((function(e){return S()(S()({},y().omit(e,y().keys(ce))),ue)}))):(null===(a=Ce.current)||void 0===a||null===(a=a.form)||void 0===a||a.setFieldsValue(S()({},ce)),L((function(e){return S()(S()({},ce),y().omit(e,y().keys(ue)))})));p(!d)},children:d?w.formatMessage({id:"playground.image.params.custom"}):w.formatMessage({id:"playground.image.params.openai"})})})]}),setParams:L,paramsConfig:re.FM,initialValues:de,params:I,selectedModel:k,modelList:t,extra:[Te].concat(Z()(Oe),Z()(Ae))})})}),d?(0,H.jsx)(ie.Z,S()(S()({},te.NW.images),{},{open:P,payload:{prompt:we},parameters:S()({},qe),onCancel:Pe,title:w.formatMessage({id:"playground.viewcode"})})):(0,H.jsx)(oe.Z,S()(S()({},te.NW.imageAdvanced),{},{open:P,payload:{prompt:we},parameters:S()({},qe),onCancel:Pe,title:w.formatMessage({id:"playground.viewcode"})}))]})})),me=(0,j.memo)(pe),fe=(n(20988),function(){var e=(0,f.useIntl)(),a=(0,p.Z)().size,n=(0,j.useRef)(null),t=(0,j.useState)([]),l=o()(t,2),i=l[0],g=l[1],b=(0,j.useState)(!1),C=o()(b,2),Z=(C[0],C[1]),k=(0,j.useCallback)((function(){var e,a;null===(e=n.current)||void 0===e||null===(a=e.viewCode)||void 0===a||a.call(e)}),[]),S=(0,j.useCallback)((function(){var e,a;null===(e=n.current)||void 0===e||null===(a=e.setCollapse)||void 0===a||a.call(e)}),[]);(0,j.useEffect)((function(){var e,t,r;a.width<c.Z.lg&&(null!==(e=n.current)&&void 0!==e&&e.collapse||null===(t=n.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t))}),[a.width]),(0,j.useEffect)((function(){var e=function(){var e=s()(r()().mark((function e(){var a,n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={image_only:!0},e.next=4,(0,z.nb)(a);case 4:return n=e.sent,t=y().map(n.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var a=s()(r()().mark((function a(){var n;return r()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e();case 3:n=a.sent,g(n),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Z(!0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();a()}),[]);return(0,w.y1)(d.ZP.RIGHT.join(","),(function(){var e,a;null===(e=n.current)||void 0===e||null===(a=e.setCollapse)||void 0===a||a.call(e)}),{preventDefault:!0}),(0,H.jsx)(m._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.text2images"}),breadcrumb:{}},extra:(0,H.jsxs)(v.Z,{children:[(0,H.jsx)(h.ZP,{size:"middle",onClick:k,icon:(0,H.jsx)(u.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,H.jsx)(h.ZP,{size:"middle",onClick:S,icon:(0,H.jsx)(u.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:x()("playground-container chat"),children:(0,H.jsx)("div",{className:"play-ground",children:(0,H.jsx)("div",{className:"chat",children:(0,H.jsx)(me,{ref:n,modelList:i})})})})})},81117:function(e,a,n){n.d(a,{LN:function(){return v},U3:function(){return f},YT:function(){return g}});var t=n(335),r=n.n(t),l=n(90228),s=n.n(l),i=n(26068),o=n.n(i),u=n(87999),c=n.n(u),d=n(55360),p=/data:\s*({.*?})(?=\n|$)/g,m=function(e){var a,n=[];if(!e)return n;for(;null!==(a=p.exec(e));)try{var t=JSON.parse(a[1]);n.push(t)}catch(e){continue}return n},f=function(){var e=c()(s()().mark((function e(a){var n,t,r,l,i,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.method||"POST",r=a.url,a.params&&(r="".concat(r,"?").concat(d.Z.stringify(a.params))),e.next=5,fetch(r,{method:t,body:"POST"===t?JSON.stringify(a.data):null,signal:a.signal,headers:o()({"Content-Type":"application/json"},a.headers)});case 5:if((l=e.sent).ok){e.next=12;break}return e.next=10,l.json();case 10:return e.t0=e.sent,e.abrupt("return",{error:!0,data:e.t0});case 12:return i=null==l||null===(n=l.body)||void 0===n?void 0:n.getReader(),u=new TextDecoder("utf-8",{fatal:!0}),e.abrupt("return",{reader:i,decoder:u});case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),v=function(){var e=c()(s()().mark((function e(a,n,t){var r,l,i,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.read();case 2:if(r=e.sent,l=r.done,i=r.value,!l){e.next=7;break}return e.abrupt("return");case 7:return o=n.decode(i,{stream:!0}),m(o).forEach((function(e){null==t||t(e)})),e.next=11,v(a,n,t);case 11:case"end":return e.stop()}}),e)})));return function(a,n,t){return e.apply(this,arguments)}}(),h=function(e,a){var n,t=e.split("\n"),l=r()(t);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(s.startsWith("data: ")){var i=s.slice(6).trim();try{a(JSON.parse(i))}catch(e){}}}}catch(e){l.e(e)}finally{l.f()}},g=function(){var e=c()(s()().mark((function e(a,n,t){var l,i,o,u,c,d,p,m,f,v,g;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l="";case 1:return e.next=4,null==a||null===(i=a.read)||void 0===i?void 0:i.call(a);case 4:if(o=e.sent,u=o.done,c=o.value,!u){e.next=10;break}return l.trim()&&h(l,t),e.abrupt("break",17);case 10:l+=n.decode(c,{stream:!0}),d=l.split("\n"),l=d.pop()||"",p=r()(d);try{for(p.s();!(m=p.n()).done;)if((f=m.value).startsWith("data: ")){v=f.slice(6).trim();try{"[DONE]"!==v&&(g=JSON.parse(v),t(g))}catch(e){}}}catch(e){p.e(e)}finally{p.f()}e.next=1;break;case 17:case"end":return e.stop()}}),e)})));return function(a,n,t){return e.apply(this,arguments)}}()}}]);