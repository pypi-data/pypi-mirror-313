{% if not pipe %}{{api_host}}/v0/sql?q={{url_escape(sql)}}%20format%20{% if format == 'json' %}JSON{% else %}CSVWithNames{% end %}&token={{jwt_read}}{% else %}{{api_host}}/v0/pipes/{{pipe}}.{{format}}?{% for p in params %}{{p['name']}}={% if p.get('default', None) %}{{url_escape(str(p['default']))}}{% end %}&{% end %}token={{jwt_read}}{% end %}{% if semver %}&__tb__semver={{semver}}{% end %}