"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1445],{48502:function(e,n,t){t.d(n,{z:function(){return l}});var r=t(73235),i=t(20958),s=t(78491);function o(){let e=(0,r._)(["\n  fragment AutomationAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetSelectionNodeFragment\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n\n  fragment AssetSelectionNodeFragment on Asset {\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      automationCondition {\n        __typename\n      }\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}let l=(0,i.Ps)(o(),s.B)},24427:function(e,n,t){t.d(n,{p:function(){return T}});var r=t(52322),i=t(14934),s=t(43212),o=t(39013),l=t(92506),a=t(38491),d=t(89891),c=t(72330),u=t(83373);let h=e=>{let{isOpen:n,onToggle:t}=e;return(0,r.jsx)(u.k,{onClick:e=>{t(e)},style:{cursor:"pointer",width:18},children:(0,r.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:n?"rotate(0deg)":"rotate(-90deg)"}})})};var x=t(35292),p=t(53664),m=t(2784),g=t(47933),j=t(8068),v=t(99590),f=t(71406),y=t(44900),S=t(75442),k=t(88257),C=t(33847),w=t(81732),E=t(70812),b=t(92199);let T=e=>{let{assetSelection:n,automationType:t,targets:l,repoAddress:a}=e,d=(0,b.Ux)(a);if(!l&&!n)return(0,r.jsx)("span",{});let c=null==l?void 0:l.filter(e=>!(0,y.pv)(e.pipelineName));return n?(0,r.jsx)(I,{assetSelection:n,automationType:t}):(null==c?void 0:c.length)?(0,r.jsx)(i.x,{flex:{direction:"row",gap:4},children:c.map(e=>e.pipelineName?(0,r.jsx)(s.V,{icon:"job",tooltipText:e.pipelineName,children:(0,r.jsx)(C.h,{pipelineName:e.pipelineName,pipelineHrefContext:a,isJob:!!(d&&(0,b.E8)(d,e.pipelineName))},e.pipelineName)},e.pipelineName):null)}):(0,r.jsx)(s.V,{children:(0,r.jsx)("div",{style:{color:o.$()},children:"None"})})},I=e=>{let{assetSelection:n,automationType:t}=e,[c,u]=(0,m.useState)(!1),h="PythonError"===n.assetsOrError.__typename?n.assetsOrError:null,x=(0,m.useMemo)(()=>"PythonError"===n.assetsOrError.__typename?[]:n.assetsOrError.nodes.slice().sort((e,n)=>f.Bl.compare((0,y.ll)(e.key),(0,y.ll)(n.key))),[n.assetsOrError]),p=(0,m.useMemo)(()=>x.filter(e=>{var n;return!!(null===(n=e.definition)||void 0===n?void 0:n.automationCondition)}),[x]),C=(0,m.useMemo)(()=>x.filter(e=>{var n;return!(null===(n=e.definition)||void 0===n?void 0:n.automationCondition)}),[x]),w=n.assetSelectionString||"",E="all materializable assets"===w,b=x[0];return b&&1===x.length?(0,r.jsx)(s.V,{icon:"asset",children:(0,r.jsx)(g.rU,{to:(0,S.p)(b.key),children:w})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Vq,{isOpen:c,title:"Targeted assets",onClose:()=>u(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,r.jsx)(i.x,{flex:{direction:"column"},style:{height:"50vh",maxHeight:"1000px",minHeight:"400px"},children:t===k.dEY.AUTO_MATERIALIZE||t===k.dEY.AUTOMATION?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:p}),(0,r.jsx)(R,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:C})]}):(0,r.jsx)(R,{assets:x})}),(0,r.jsx)(l.cN,{topBorder:!0,children:(0,r.jsx)(a.zx,{intent:"primary",onClick:()=>{u(!1)},children:"Close"})})]}),(0,r.jsx)(s.V,{icon:1===x.length?"asset":"asset_group",intent:h?"danger":"none",children:(0,r.jsx)(d.Z,{onClick:()=>{h?(0,j._K)({title:"Python error",body:(0,r.jsx)(v.T9,{error:h})}):u(!0)},color:h?o.Yn():o.Es(),children:h?"Error loading asset selection":E?"All materializable assets":w})})]})},R=e=>{let{assets:n,title:t,titleBorder:s="top-and-bottom"}=e,[l,a]=(0,m.useState)(!0);return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(i.x,{border:s,padding:{right:24,vertical:12},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:()=>{a(!l)},children:[(0,r.jsx)(h,{onToggle:()=>{},isOpen:l}),(0,r.jsxs)(x.Tj,{children:[t," (",E.V.format(n.length),")"]})]})}):null,l?n.length?(0,r.jsx)("div",{style:{height:"100%",overflowY:"hidden"},children:(0,r.jsx)(w.Y,{padding:0,items:n,renderItem:e=>(0,r.jsx)(_,{asset:e},e.id),itemBorders:!0})}):(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:12},children:(0,r.jsx)(x.YS,{color:o.$(),children:"0 assets"})}):null]})},_=e=>{let{asset:n}=e;return(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,r.jsx)(g.rU,{to:(0,S.p)(n.key),target:"_blank",children:(0,r.jsx)(i.x,{style:{overflow:"hidden"},children:(0,r.jsx)(p.g,{text:(0,y.ll)(n.key)})})})})}},59502:function(e,n,t){t.d(n,{p:function(){return y}});var r=t(52322),i=t(39013),s=t(60129),o=t(35292),l=t(35002),a=t(40191),d=t(28879),c=t.n(d),u=t(77491),h=t.n(u),x=t(2784),p=t(35505),m=t(22791),g=t(57758),j=t(88257);c().extend(h());let v={[j.izS.SUCCESS]:i.fA(),[j.izS.FAILURE]:i.FY(),[j.izS.STARTED]:i.v4(),[j.izS.SKIPPED]:i.A8()},f={[j.izS.SUCCESS]:i.Lv(),[j.izS.FAILURE]:i.MP(),[j.izS.STARTED]:i.Jq(),[j.izS.SKIPPED]:i.$l()},y=e=>{let{ticks:n,tickResultType:t,onHoverTick:i,onSelectTick:a,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[p,j]=(0,x.useState)(Date.now()),[v,f]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!v&&!d){let e=setInterval(()=>{j(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,v]);let y=(null==d?void 0:d[1])?1e3*d[1]:p+h,R=(null==d?void 0:d[0])?1e3*d[0]:p-c,_=R<p&&p<y,P=y-R,{viewport:A,containerProps:O}=(0,s.S)(),z=(0,x.useMemo)(()=>n.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>R).reverse(),[n,R]),N=(0,x.useMemo)(()=>z.map((e,n)=>{var t,r;let i=(t=1e3*e.timestamp,A.width*(t-R)/P),s=(r=(0,g.g6)(e,z.length-n-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:p,A.width*(r-R)/P);return{...e,width:Math.max(s-i,8),startX:i}}),[R,p,z,P,A.width]),D=Math.max((y-R)/25,u)/5,F=Math.ceil(R/D)*D,q=Math.ceil((y-F)/D),$=Math.ceil(q/5),M=(0,x.useMemo)(()=>{let e=[];for(let n=0;n<q;n++){let t=F+n*D;e.push({time:t,x:A.width*(t-R)/P,showLabel:n%$==0})}return e},[q,F,D,A.width,R,P,$]);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...O,children:[(0,r.jsxs)(k,{children:[M.map(e=>(0,r.jsxs)(E,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,r.jsx)(b,{}),e.showLabel?(0,r.jsx)(T,{children:(0,r.jsx)(o.YS,{children:(0,r.jsx)(m.E,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),N.map(e=>{var n,s;let o=null!==(s="materializations"!==t&&"runIds"in e?null===(n=e.runIds)||void 0===n?void 0:n.length:e.requestedAssetMaterializationCount)&&void 0!==s?s:0;return(0,r.jsx)(w,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{i(e),f(!0)},onMouseLeave:()=>{i(),f(!1)},onClick:()=>{a(e)},children:(0,r.jsx)(l.u,{content:(0,r.jsx)(S,{tick:e,tickResultType:t}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),_?(0,r.jsx)(I,{style:{transform:"translateX(".concat(A.width*(p-R)/P,"px)")}}):null]}),(0,r.jsx)(C,{})]})})},S=(0,x.memo)(e=>{let{tick:n,tickResultType:t}=e,s=(0,x.useMemo)(()=>{var e,r;return n.status===j.izS.FAILURE?"Evaluation failed":n.status===j.izS.STARTED?"Evaluating…":"materializations"!==t&&"runs"in n?"".concat((null===(e=n.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(r=n.runs)||void 0===r?void 0:r.length,"","s")," requested"):"".concat(n.requestedAssetMaterializationCount," materialization").concat((0,a.I)(n.requestedAssetMaterializationCount,"","s")," requested")},[n,t]),l=c()(1e3*n.timestamp),d=c()(n.endTimestamp?1e3*n.endTimestamp:Date.now()),u=l.to(d,!0);return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.YS,{as:"div",children:(0,r.jsx)(m.E,{timestamp:{unix:n.timestamp},timeFormat:{showSeconds:!0}})}),(0,r.jsxs)(o.YS,{as:"div",children:[s," (",u,")"]}),n.status===j.izS.STARTED?null:(0,r.jsx)(o.YS,{color:i.$(),children:"Click for details"})]})}),k=p.ZP.div.withConfig({componentId:"sc-93f8c965-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],i.wL()),C=p.ZP.div.withConfig({componentId:"sc-93f8c965-1"})(["height:24px;"]),w=p.ZP.div.withConfig({componentId:"sc-93f8c965-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],i.v8(),e=>{let{status:n}=e;return"\n    background: ".concat(v[n],";\n    &:hover {\n      background: ").concat(f[n],";\n    }\n  ")}),E=p.ZP.div.withConfig({componentId:"sc-93f8c965-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),b=p.ZP.div.withConfig({componentId:"sc-93f8c965-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],i.wL()),T=p.ZP.div.withConfig({componentId:"sc-93f8c965-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),I=p.ZP.div.withConfig({componentId:"sc-93f8c965-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],i.Bj(),i.Bj(),i.KH())},9790:function(e,n,t){t.d(n,{C:function(){return J},H:function(){return Z}});var r,i,s=t(73235),o=t(52322);t(26529);var l=t(14934),a=t(79106),d=t(37483),c=t(80122),u=t(46100),h=t(60603),x=t(38491),p=t(72330),m=t(35292),g=t(74188),j=t(53664),v=t(89891),f=t(40191),y=t(39013),S=t(1747),k=t(65511),C=t(42418),w=t(2784),E=t(35505),b=t(77837),T=t(581),I=t(59502),R=t(44030),_=t(57758),P=t(20958),A=t(50309),O=t(78491),z=t(99590),N=t(16336),D=t(85227),F=t(88257),q=t(4378),$=t(2278),M=t(15332),L=t(86269),U=t(57397),K=t(58905),B=t(20718);function V(){let e=(0,s._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}k.kL.register(C.ZP),(r=i||(i={})).ALL="all",r.FAILED="failed",r.SUCCESS="success";let Y={all:[F.izS.SUCCESS,F.izS.FAILURE,F.izS.STARTED,F.izS.SKIPPED],failed:[F.izS.FAILURE],success:[F.izS.SUCCESS]},Z=e=>{var n,t;let{name:r,repoAddress:i,tabs:s,tickResultType:u,setTimerange:h,setParentStatuses:x}=e,[p,m]=(0,q.q)({queryKey:"status",defaults:{status:"all"}}),[g,j]=(0,w.useState)(null),[v,f]=(0,w.useState)(null),y={...(0,B.$)(i),name:r},S=w.useMemo(()=>Y[p]||Y.all,[p]),{queryResult:k,paginationProps:C}=(0,M.l)({nextCursorForResult:e=>{var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:y,statuses:S},query:W,pageSize:25});(0,N.C4)(k,N.dT);let E=null==k?void 0:null===(n=k.data)||void 0===n?void 0:n.instigationStateOrError,b=w.useMemo(()=>(null==E?void 0:E.__typename)==="InstigationState"?E.ticks:[],[E]);w.useEffect(()=>{if(C.hasPrevCursor){if(b&&b.length){var e,n;let t=null===(e=b[b.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=b[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==h||h([t,r]))}}else null==h||h(void 0)},[C.hasPrevCursor,b,h]),w.useEffect(()=>{C.hasPrevCursor?null==x||x(Array.from(S)):null==x||x(void 0)},[C.hasPrevCursor,x,S]),w.useEffect(()=>{!C.hasPrevCursor||b.length||k.loading||C.reset()},[b,k.loading,C.hasPrevCursor]);let{data:T}=k;if(!T)return(0,o.jsx)(l.x,{padding:{vertical:48},children:(0,o.jsx)(a.$,{purpose:"page"})});if("PythonError"===T.instigationStateOrError.__typename)return(0,o.jsx)(z.T9,{error:T.instigationStateOrError});if("InstigationStateNotFoundError"===T.instigationStateOrError.__typename)return(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:I}=T.instigationStateOrError;return b.length||"all"!==p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,o.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[s,(0,o.jsx)(l.x,{flex:{direction:"row",gap:16},children:(0,o.jsx)(H,{status:p,onChange:m})})]})}),b.length?(0,o.jsxs)(G,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),I===F._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"}),(0,o.jsx)("th",{style:{width:80},children:"Logs"})]})}),(0,o.jsx)("tbody",{children:b.map((e,n)=>(0,o.jsx)(Q,{tick:e,tickResultType:u,instigationSelector:y,index:n,onShowDetails:j,onShowLogs:f},e.id))})]}):(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})}),b.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(c.pI,{...C})}):null,(0,o.jsx)(R.X,{isOpen:!!g,tickId:null==g?void 0:g.tickId,tickResultType:u,instigationSelector:y,onClose:()=>j(null)}),(0,o.jsx)(U.l,{isOpen:!!v,tickId:null!==(t=null==v?void 0:v.tickId)&&void 0!==t?t:null,timestamp:null==v?void 0:v.timestamp,instigationSelector:y,onClose:()=>f(null)})]}):null},H=e=>{let{status:n,onChange:t}=e,r=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],i=r.find(e=>{let{key:t}=e;return t===n});return(0,o.jsx)(u.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:i,items:r,itemRenderer:(e,n)=>(0,o.jsx)(h.sN,{active:n.modifiers.active,onClick:n.handleClick,text:e.label,style:{width:"300px"}},e.key),itemListRenderer:e=>{let{renderItem:n,filteredItems:t}=e,r=t.map(n).filter(Boolean);return(0,o.jsx)(h.v2,{children:r})},onItemSelect:e=>t(e.key),children:(0,o.jsx)(x.zx,{rightIcon:(0,o.jsx)(p.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==i?void 0:i.label})})},J=e=>{let{name:n,repoAddress:t,tickResultType:r,onHighlightRunIds:i,beforeTimestamp:s,afterTimestamp:d,statuses:c}=e,[u,h]=(0,q.q)({encode:e=>({tickId:e}),decode:e=>{var n;return null!==(n=e.tickId)&&void 0!==n?n:void 0}}),[x,p]=w.useState(!1),g={...(0,B.$)(t),name:n},j=(0,P.aM)(W,{variables:{instigationSelector:g,beforeTimestamp:s,afterTimestamp:d,statuses:c,limit:s?void 0:15},notifyOnNetworkStatusChange:!0});(0,N.C4)(j,1e3,!(x||s&&d));let{data:v,error:f}=j;if(!v||f)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(m.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{padding:{vertical:64},children:(0,o.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===v.instigationStateOrError.__typename)return(0,o.jsx)(z.T9,{error:v.instigationStateOrError});if("InstigationStateNotFoundError"===v.instigationStateOrError.__typename)return null;let{ticks:y=[]}=v.instigationStateOrError,S=e=>{h(e?e.tickId:void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.X,{isOpen:!!u,tickId:u,tickResultType:r,instigationSelector:g,onClose:()=>S(void 0)}),(0,o.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(m.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{border:"top",children:(0,o.jsx)(I.p,{ticks:y,tickResultType:r,onHoverTick:e=>{e||p(!1),(null==e?void 0:e.runIds)&&(i&&i(e.runIds),p(!0))},onSelectTick:S,exactRange:s&&d?[d,s]:void 0})})]})};function Q(e){let{tick:n,tickResultType:t,index:r,onShowDetails:i,onShowLogs:s}=e,a=(0,D.m)(),[d,c]=w.useMemo(()=>{let e=n.dynamicPartitionsRequestResults;return[(0,_.sw)(e,F.Dq2.ADD_PARTITIONS),(0,_.sw)(e,F.Dq2.DELETE_PARTITIONS)]},[null==n?void 0:n.dynamicPartitionsRequestResults]),u=(0,_.g6)(n,r);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(L.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(K.a,{tick:n,tickResultType:t,isStuckStarted:u})}),(0,o.jsx)("td",{children:u?"- ":(0,o.jsx)($.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===F._5b.SENSOR?(0,o.jsx)("td",{children:n.cursor?(0,o.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:g.b.monospace,fontSize:"14px",maxWidth:"400px",overflow:"hidden"},children:(0,o.jsx)(j.g,{text:n.cursor||""})}),(0,o.jsx)(X,{onClick:async()=>{a(n.cursor||""),await (0,A.B7)({message:(0,o.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,o.jsx)(p.JO,{name:"assignment"})})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(l.x,{flex:{direction:"column",gap:6},children:["runs"===t?(0,o.jsxs)(l.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(v.Z,{onClick:()=>i(n),children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(e=>(0,o.jsx)(w.Fragment,{children:(0,o.jsx)(T.RX,{run:e})},e.id)):null]}):(0,o.jsx)(l.x,{flex:{alignItems:"center",gap:8},children:(0,o.jsx)(v.Z,{onClick:()=>i(n),children:1===n.requestedAssetMaterializationCount?"1 materialization requested":"".concat(n.requestedAssetMaterializationCount," materializations requested")})}),d||c?(0,o.jsxs)(m.YS,{children:["(",d?(0,o.jsxs)("span",{children:[d," partition",(0,f.I)(d,"","s")," created",c?",":""]}):null,c?(0,o.jsxs)("span",{children:[c," partition",(0,f.I)(c,"","s")," deleted,"]}):null,")"]}):null]})}),(0,o.jsx)("td",{children:(0,o.jsx)(x.zx,{onClick:()=>s(n),children:"View logs"})})]})}let W=(0,P.Ps)(V(),T.S9,O.B,b.dY,T.vw),X=E.ZP.button.withConfig({componentId:"sc-129eba66-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],p.a1,y.md(),p.a1,y.$l(),p.a1,y.Es()),G=(0,E.ZP)(S.i).withConfig({componentId:"sc-129eba66-1"})(["th,td{vertical-align:middle !important;}"])},57758:function(e,n,t){t.d(n,{g6:function(){return i},sw:function(){return s}});var r=t(88257);function i(e,n){return!e.endTimestamp&&(0!==n&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function s(e,n){return e.reduce((e,t)=>{if(t.type===n){var r;return e+((null===(r=t.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},6750:function(e,n,t){t.d(n,{d:function(){return a}});var r=t(73235),i=t(20958),s=t(78491),o=t(48502);function l(){let e=(0,r._)(["\n  query ScheduleAssetSelectionQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return l=function(){return e},e}let a=(0,i.Ps)(l(),o.z,s.B)},55546:function(e,n,t){t.d(n,{e:function(){return et}});var r=t(52322),i=t(74580),s=t(35292),o=t(43212),l=t(14934),a=t(35002),d=t(38491),c=t(90441),u=t(74188),h=t(72330),x=t(2784),p=t(47933),m=t(35505),g=t(19679),j=t(84842);let v=e=>{var n;let{metadata:t}=e;return(null==t?void 0:null===(n=t.assetKeys)||void 0===n?void 0:n.length)?(0,r.jsx)(l.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(e=>(0,r.jsx)(j.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,r.jsx)("span",{})};var f=t(89398),y=t(20958),S=t(36803),k=t(20718);let C=e=>{let{repoAddress:n,sensor:t}=e,{permissions:{canStartSensor:i,canStopSensor:s}}=(0,S.xz)(n.location),{name:o}=t,l={...(0,k.$)(n),sensorName:o},[c,{loading:u}]=(0,y.Db)(f.Lq,{onCompleted:f.oI}),h=i&&s,x=h?'In code, a default status for "'.concat(o,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):S.Qr;return(0,r.jsx)(a.u,{content:(0,r.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:x}),display:"flex",children:(0,r.jsx)(d.zx,{disabled:u||!h,onClick:()=>{c({variables:{sensorSelector:l}})},children:"Reset sensor status"})})};var w=t(60918),E=t(16336),b=t(24427),T=t(88257),I=t(79059),R=t(86269),_=t(73235),P=t(92506),A=t(34147),O=t(89891),z=t(39013),N=t(79106),D=t(74159),F=t(37483),q=t(49035),$=t(1747);function M(e){let{includeTitle:n=!0,requests:t}=e,i=(0,x.useMemo)(()=>{if(!t.length)return[];let e=[];return t.forEach(n=>{let{partitionKeys:t,partitionsDefName:r,type:i}=n;null==t||t.forEach(n=>{e.push({key:n,def:r,type:i})})}),e},[t]);return i.length?(0,r.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[n?(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(h.JO,{name:"partition"}),(0,r.jsx)(s.pm,{children:"Dynamic Partition Requests"})]}):null,(0,r.jsxs)($.i,{style:{borderRight:"1px solid ".concat(z.wL())},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Partition"}),(0,r.jsx)("th",{children:"Partition definition"}),(0,r.jsx)("th",{children:"Requested change"})]})}),(0,r.jsx)("tbody",{children:i.map((e,n)=>{let{key:t,def:i,type:s}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:s===T.Dq2.ADD_PARTITIONS?(0,r.jsx)(o.V,{intent:"success",children:(0,r.jsx)("span",{children:"Add Partition"})}):(0,r.jsx)(o.V,{intent:"danger",children:(0,r.jsx)("span",{children:"Delete Partition"})})})]},n)})})]})]}):null}var L=t(76562),U=t(8068),K=t(50309),B=t(78491),V=t(99590),Y=t(71406),Z=t(77851);function H(){let e=(0,_._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return H=function(){return e},e}let J=e=>{let{isOpen:n,onClose:t,name:i}=e;return(0,r.jsx)(P.Vq,{isOpen:n,onClose:t,style:{width:"70vw",display:"flex"},icon:"sensors",title:i,children:(0,r.jsx)(Q,{...e})})},Q=e=>{var n;let{repoAddress:t,name:i,currentCursor:a,onClose:c,jobName:u}=e,[p]=(0,y.Db)(W),[m,j]=(0,x.useState)(a),[v,f]=(0,x.useState)(!1),[S,k]=(0,x.useState)(null),[C,w]=(0,x.useState)(null),E=(0,x.useMemo)(()=>({sensorName:i,repositoryLocationName:t.location,repositoryName:t.name}),[t,i]),b=(0,x.useCallback)(async()=>{var e,n;f(!0);let t=null===(e=(await p({variables:{selectorData:E,cursor:m}})).data)||void 0===e?void 0:e.sensorDryRun;t?(null==t?void 0:t.__typename)==="DryRunInstigationTick"?(null===(n=t.evaluationResult)||void 0===n?void 0:n.error)?k(t.evaluationResult.error):w(t):(null==t?void 0:t.__typename)==="SensorNotFoundError"?(0,U._K)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(i)}):k(t):(0,Y.UT)("sensorDryRun Mutation returned no data??"),f(!1)},[p,E,m,i]),T=(0,x.useMemo)(()=>C||S?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(d.zx,{"data-testid":(0,Z.N)("test-again"),onClick:()=>{w(null),k(null)},children:"Test again"}),(0,r.jsx)(d.zx,{intent:"primary",onClick:c,children:"Close"})]}):v?(0,r.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(d.zx,{onClick:c,children:"Cancel"})}):(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(d.zx,{onClick:c,children:"Cancel"}),(0,r.jsx)(d.zx,{onClick:b,intent:"primary","data-testid":(0,Z.N)("evaluate"),children:"Evaluate"})]}),[C,S,v,c,b]),[I,R]=(0,x.useState)("Unpersisted"),[_]=(0,y.Db)(g.T),$=(0,x.useCallback)(async()=>{var e;let n=null==C?void 0:null===(e=C.evaluationResult)||void 0===e?void 0:e.cursor;n||(0,Y.UT)("Did not expect to get here"),R("Persisting");let{data:t}=await _({variables:{sensorSelector:E,cursor:n}});if((null==t?void 0:t.setSensorCursor.__typename)==="Sensor")await (0,K.B7)({message:"Cursor value updated",intent:"success"}),R("Persisted");else if(null==t?void 0:t.setSensorCursor){let e=t.setSensorCursor;await (0,K.B7)({intent:"danger",message:(0,r.jsxs)(A.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("div",{children:"Could not set cursor value."}),(0,r.jsx)(O.Z,{color:z.KH(),underline:"always",onClick:()=>{(0,U._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,r.jsx)(V.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==C?void 0:null===(n=C.evaluationResult)||void 0===n?void 0:n.cursor,E,_]),L=(0,x.useMemo)(()=>{if(C||S){var e,n,c,x,p,g,f;let j=null==C?void 0:null===(e=C.evaluationResult)||void 0===e?void 0:e.runRequests,v=(null==j?void 0:j.length)||0,y=!S&&0===v,k=null==C?void 0:null===(n=C.evaluationResult)||void 0===n?void 0:n.dynamicPartitionsRequests;return(0,r.jsx)(l.x,{flex:{direction:"column",gap:8},children:(0,r.jsxs)(l.x,{children:[(0,r.jsxs)(X,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Result"}),(0,r.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:S?(0,r.jsx)(o.V,{intent:"danger",children:"Failed"}):v?(0,r.jsxs)(o.V,{intent:"success",children:[v," run requests"]}):(0,r.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Used cursor value"}),(0,r.jsx)("pre",{children:(null==m?void 0:m.length)?m:"None"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Computed cursor value"}),(0,r.jsx)("pre",{children:(null==C?void 0:null===(x=C.evaluationResult)||void 0===x?void 0:null===(c=x.cursor)||void 0===c?void 0:c.length)?null==C?void 0:C.evaluationResult.cursor:S?"Error":"None"}),S||(null!=a?a:"")===(null!==(f=null==C?void 0:null===(p=C.evaluationResult)||void 0===p?void 0:p.cursor)&&void 0!==f?f:"")?null:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(d.zx,{disabled:["Persisting","Persisted"].includes(I),loading:"Persisting"===I,onClick:$,children:(0,r.jsx)("span",{"data-testid":(0,Z.N)("persist-cursor"),children:"Persisting"===I?"Persisting":"Persisted"===I?"Persisted":"Persist computed cursor value"})}),"Persisted"===I?(0,r.jsx)(h.JO,{name:"check_circle",color:z.fA()}):null]})]})]}),S?(0,r.jsx)("div",{children:(0,r.jsx)(V.T9,{error:S})}):null,y?(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Skip reason"}),(0,r.jsx)("div",{children:(null==C?void 0:null===(g=C.evaluationResult)||void 0===g?void 0:g.skipReason)||"No skip reason was output"})]}):null,v&&j?(0,r.jsx)(q.k,{runRequests:j,name:i,jobName:u,isJob:!0,repoAddress:t}):null,(null==k?void 0:k.length)?(0,r.jsx)("div",{style:{marginTop:"24px"},children:(0,r.jsx)(M,{requests:k})}):null]})})}return v?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(N.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Evaluating sensor"})]}):(0,r.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:"Cursor"}),(0,r.jsx)(D.oi,{value:m,onChange:e=>j(e.target.value),"data-testid":(0,Z.N)("cursor-input")}),""!==a&&a?null:(0,r.jsx)(l.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,r.jsx)(F.t,{icon:"no-results",title:"You're not using a cursor",description:(0,r.jsxs)("span",{children:["Check our"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[C,S,v,a,I,$,i,u,t,m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:L})}),(0,r.jsx)(P.cN,{topBorder:!0,children:T})]})},W=(0,y.Ps)(H(),L.s,B.B),X=m.ZP.div.withConfig({componentId:"sc-c9698952-0"})(["display:grid;grid-template-columns:repeat(3,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],z.wL(),s.pm);var G=t(58905);let ee={showSeconds:!0,showTimezone:!1},en=e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"),et=e=>{var n,t;let{sensor:m,repoAddress:j,daemonHealth:f,refreshState:y,assetSelection:k}=e,{name:_,sensorState:{status:P,ticks:A},metadata:O}=m,{permissions:z,disabledReasons:N,loading:D}=(0,S.xz)(j.location),{canUpdateSensorCursor:F}=z,[q,$]=(0,x.useState)(!1),M={sensorName:m.name,repositoryName:j.name,repositoryLocationName:j.location},L=A.length?A[0]:null,U=m.sensorState.typeSpecificData&&"SensorData"===m.sensorState.typeSpecificData.__typename&&m.sensorState.typeSpecificData.lastCursor,[K,B]=(0,x.useState)(!1),V=P===T.ynu.RUNNING;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.m,{title:(0,r.jsxs)(s.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,r.jsx)(p.rU,{to:"/automation",children:"Automation"}),(0,r.jsx)("span",{children:"/"}),_]}),icon:"sensors",tags:(0,r.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,r.jsx)(I.b,{repoAddress:j})]}),right:(0,r.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(E.xi,{refreshState:y}),(0,r.jsx)(a.u,{canShow:m.sensorType!==T.dEY.STANDARD,content:"Testing not available for this sensor type",placement:"top-end",children:(0,r.jsx)(d.zx,{disabled:m.sensorType!==T.dEY.STANDARD,onClick:()=>{B(!0)},children:"Test sensor"})})]})}),(0,r.jsx)(J,{isOpen:K,onClose:()=>{B(!1)},currentCursor:U||"",name:m.name,repoAddress:j,jobName:(null===(t=m.targets)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.pipelineName)||""}),(0,r.jsx)(c.fJ,{children:(0,r.jsxs)("tbody",{children:[m.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:m.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:L?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,r.jsx)(R.v,{timestamp:L.timestamp,timeFormat:ee}),(0,r.jsx)(G.a,{tick:L,tickResultType:"runs"})]})}):"Sensor has never run"})]}),m.nextTick&&f&&V&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(R.v,{timestamp:m.nextTick.timestamp,timeFormat:ee})})]}),m.targets&&m.targets.length||k?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)(er,{children:(0,r.jsx)(b.p,{targets:m.targets,repoAddress:j,assetSelection:k||null,automationType:m.sensorType})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(w.c,{repoAddress:j,sensor:m}),m.canReset&&(0,r.jsx)(C,{repoAddress:j,sensor:m})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Frequency"}),(0,r.jsx)("td",{children:en(m.minIntervalSeconds)})]}),O.assetKeys&&O.assetKeys.length?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Monitored assets"}),(0,r.jsx)("td",{children:(0,r.jsx)(v,{metadata:O})})]}):null,m.sensorType!==T.dEY.AUTO_MATERIALIZE&&m.sensorType!==T.dEY.AUTOMATION?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontFamily:u.b.monospace,fontSize:"14px"},children:U||"None"}),(0,r.jsx)(a.u,{canShow:!F,content:N.canUpdateSensorCursor,children:(0,r.jsx)(d.zx,{icon:(0,r.jsx)(h.JO,{name:"edit"}),disabled:!F||D,onClick:()=>$(!0),children:"Edit"})})]}),(0,r.jsx)(g.x,{isOpen:q,sensorSelector:M,cursor:U||"",onClose:()=>$(!1)})]})]}):null]})})]})},er=m.ZP.td.withConfig({componentId:"sc-54ea1369-0"})(["button{line-height:20px;}"])},68856:function(e,n,t){t.d(n,{Z:function(){return B},A:function(){return U}});var r=t(73235),i=t(52322),s=t(51484),o=t(14934),l=t(79106),a=t(39013),d=t(37483),c=t(49308),u=t(2784),h=t(7267),x=t(55546),p=t(20958),m=t(581);function g(){let e=(0,r._)(["\n  fragment SensorFragment on Sensor {\n    id\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return g=function(){return e},e}let j=(0,p.Ps)(g(),m.ai);var v=t(16629);let f=e=>{let{sensorDaemonStatus:n,assetDaemonStatus:t,...r}=e,s=n&&!1===n.healthy&&n.required,l=t&&!1==!t.healthy&&t.required;return l||s?(0,i.jsx)(o.x,{...r,children:(0,i.jsx)(v.b,{intent:"warning",title:s?l?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,i.jsxs)("div",{children:["See the"," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null};var y=t(80122),S=t(16336),k=t(71902),C=t(30916),w=t(43984),E=t(15332),b=t(22563);function T(){let e=(0,r._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return T=function(){return e},e}let I=e=>{let{sensor:n,repoAddress:t,highlightedIds:r,tabs:s}=e,{queryResult:o,paginationProps:l}=(0,E.l)({query:R,variables:{filter:{tags:[{key:w.H.SensorName,value:n.name},{key:w.H.RepositoryLabelTag,value:(0,b.Wg)(t)}]}},nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:e=>(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results,pageSize:20});(0,S.C4)(o,l.hasPrevCursor?36e5:1e4);let a=o.data;if(a&&(null==a?void 0:a.pipelineRunsOrError.__typename)==="Runs"||(a=o.previousData),!a||(null==a?void 0:a.pipelineRunsOrError.__typename)!=="Runs")return null;let d=a.pipelineRunsOrError.results;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.A,{actionBarComponents:s,runs:d,highlightedIds:r,hideCreatedBy:!0}),(0,i.jsx)("div",{style:{paddingBottom:"16px"},children:(0,i.jsx)(y.pI,{...l})})]})},R=(0,p.Ps)(T(),C.Z);var _=t(78491),P=t(99590),A=t(69737),O=t(48502),z=t(88257),N=t(20171),D=t(4378),F=t(40782),q=t(9790),$=t(20718);function M(){let e=(0,r._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return M=function(){return e},e}function L(){let e=(0,r._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return L=function(){return e},e}let U=e=>{var n;let{repoAddress:t}=e;(0,A.Px)();let{sensorName:r}=(0,h.UO)();(0,N.j)("Sensor: ".concat(r));let m={...(0,$.$)(t),sensorName:r},[g,j]=(0,u.useState)(void 0),[v,y]=(0,u.useState)(void 0),k=(0,u.useMemo)(()=>v||g?{afterTimestamp:null==v?void 0:v[0],beforeTimestamp:null==v?void 0:v[1],statuses:g}:{},[g,v]),[C,w]=(0,D.q)((0,u.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:n}=e;return"runs"===n?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),E=(0,p.aM)(K,{variables:{sensorSelector:m},notifyOnNetworkStatusChange:!0}),b=(0,p.aM)(B,{variables:{sensorSelector:m},notifyOnNetworkStatusChange:!0}),T=(0,S.C4)(E,S.dT),R=(0,S.C4)(b,S.dT),_=(0,S.V5)(T,R),{data:O,loading:F}=E,M=(0,i.jsx)(s.h,{activeItems:new Set([C]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{w(e)}});if(!O&&F)return(0,i.jsxs)(o.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,i.jsx)(l.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:a.$()},children:"Loading sensor…"})]});if(!O||"SensorNotFoundError"===O.sensorOrError.__typename)return(0,i.jsx)(o.x,{padding:{vertical:32},children:(0,i.jsx)(d.t,{icon:"error",title:"Could not find sensor `".concat(r,"` in definitions for `").concat(t.name,"`")})});let{sensorOrError:L}=O;if("PythonError"===L.__typename)return(0,i.jsx)(P.T9,{error:L});if("UnauthorizedError"===L.__typename)return(0,i.jsx)(h.l_,{to:"/overview/sensors"});let{instance:U}=O,V=(null===(n=b.data)||void 0===n?void 0:n.sensorOrError.__typename)==="Sensor"?b.data.sensorOrError.assetSelection:null,Y=L.sensorType===z.dEY.AUTO_MATERIALIZE||L.sensorType===z.dEY.AUTOMATION,Z=U.daemonHealth.sensorDaemonStatus,H=Y?"materializations":"runs";return(0,i.jsxs)(c.T,{children:[(0,i.jsx)(x.e,{repoAddress:t,sensor:L,daemonHealth:Z.healthy,refreshState:_,assetSelection:V||null}),(0,i.jsx)(f,{sensorDaemonStatus:Z,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(q.C,{tickResultType:H,repoAddress:t,name:L.name,...k}),(0,i.jsx)(o.x,{margin:{top:32},border:"top",children:"evaluations"===C?(0,i.jsx)(q.H,{tabs:M,tickResultType:H,repoAddress:t,name:L.name,setParentStatuses:j,setTimerange:y}):(0,i.jsx)(I,{repoAddress:t,sensor:L,tabs:M})})]})},K=(0,p.Ps)(M(),j,_.B,F.O),B=(0,p.Ps)(L(),O.z,_.B)},49035:function(e,n,t){t.d(n,{k:function(){return g}});var r=t(52322),i=t(14934),s=t(43212),o=t(1747),l=t(39013),a=t(38491),d=t(72330),c=t(1040),u=t(81535),h=t(33847),x=t(77851),p=t(92199),m=t(10539);let g=e=>{let{runRequests:n,isJob:t,repoAddress:a,mode:d,jobName:c}=e,u=(0,p.Ux)(a),m=(0,r.jsx)("tbody",{"data-testid":(0,x.N)("table-body"),children:n.map((e,n)=>{var o;return(0,r.jsxs)("tr",{"data-testid":(0,x.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(h.h,{pipelineName:null!==(o=e.jobName)&&void 0!==o?o:c,pipelineHrefContext:a,isJob:!!u&&t,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(e=>{let{key:n}=e;return!["dagster/schedule_name"].includes(n)}).map(e=>{let{key:n,value:t}=e;return(0,r.jsx)(s.V,{children:"".concat(n,": ").concat(t)},n)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(j,{request:e,mode:d,jobName:c,repoAddress:a,isJob:t})})]},n)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(o.i,{style:{borderRight:"1px solid ".concat(l.wL()),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[t?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),m]})})};function j(e){var n;let{mode:t,request:i,jobName:s,isJob:o,repoAddress:l}=e,h=(0,u.Q)(),x=null!==(n=i.jobName)&&void 0!==n?n:s,[p,g]=(0,c.aC)(l,x);return(0,r.jsx)(a.zx,{icon:(0,r.jsx)(d.JO,{name:"edit"}),onClick:()=>{g(e=>{var n;return(0,c.f0)(e,{mode:t,runConfigYaml:i.runConfigYaml,tags:i.tags,assetSelection:null===(n=i.assetSelection)||void 0===n?void 0:n.map(e=>{let{path:n}=e;return{assetKey:{path:n}}})})}),h((0,m.$U)(l,"/".concat(o?"jobs":"pipelines","/").concat(x,"/playground")))},children:"Open in Launchpad"})}},76562:function(e,n,t){t.d(n,{s:function(){return s}});var r=t(73235);function i(){let e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return i=function(){return e},e}let s=(0,t(20958).Ps)(i())},57397:function(e,n,t){t.d(n,{l:function(){return g}});var r=t(73235),i=t(52322),s=t(92506),o=t(14934),l=t(39013),a=t(38491),d=t(45774),c=t(37483),u=t(72330),h=t(18978),x=t(20958),p=t(86269);function m(){let e=(0,r._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}let g=e=>{let{tickId:n,timestamp:t,instigationSelector:r,isOpen:d,onClose:c}=e;return(0,i.jsxs)(s.Vq,{isOpen:d,onClose:c,style:{width:"70vw",maxWidth:"1200px",minWidth:"800px"},title:(0,i.jsx)("span",{children:t?(0,i.jsxs)("span",{children:[(0,i.jsxs)("span",{children:["Logs for ",r.name,": "]}),(0,i.jsx)(p.v,{timestamp:t,timeFormat:{showSeconds:!0}})]}):(0,i.jsxs)("span",{children:["Logs for ",r.name]})}),children:[n?(0,i.jsx)(j,{instigationSelector:r,tickId:n}):null,(0,i.jsx)(o.x,{background:l.v8(),style:{zIndex:3,position:"relative"},children:(0,i.jsx)(s.cN,{topBorder:!0,children:(0,i.jsx)(a.zx,{onClick:c,children:"Done"})})})]})},j=e=>{let{instigationSelector:n,tickId:t}=e,{data:r,loading:s}=(0,x.aM)(v,{variables:{instigationSelector:n,tickId:t},notifyOnNetworkStatusChange:!0}),l=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"&&(null==r?void 0:r.instigationStateOrError.tick)?null==r?void 0:r.instigationStateOrError.tick.logEvents.events:void 0;if(s)return(0,i.jsx)(o.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(d.f,{label:"Loading logs…"})});if(l&&l.length)return(0,i.jsx)(o.x,{style:{height:500},flex:{direction:"column"},children:(0,i.jsx)(h.g,{events:l})});let p=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"?null==r?void 0:r.instigationStateOrError.tick.status:void 0,m=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"?null==r?void 0:r.instigationStateOrError.instigationType:void 0,g="SENSOR"===m?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===m?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,i.jsx)(o.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:(0,i.jsx)(c.t,{icon:"no-results",title:"No logs to display",description:(0,i.jsxs)(o.x,{flex:{direction:"column",gap:12},children:[(0,i.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,i.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:g&&(0,i.jsx)(a.fr,{href:g,rightIcon:(0,i.jsx)(u.JO,{name:"open_in_new"}),children:"View documentation"})})})},v=(0,x.Ps)(m(),h.n)},58905:function(e,n,t){t.d(n,{a:function(){return g}});var r=t(52322),i=t(43212),s=t(75561),o=t(39013),l=t(35002),a=t(14934),d=t(89891),c=t(40191),u=t(92506),h=t(38491),x=t(2784),p=t(99590),m=t(88257);let g=e=>{let{tick:n,tickResultType:t,isStuckStarted:g}=e,[j,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===t?"materialization":"run";switch(n.status){case m.izS.STARTED:return(0,r.jsx)(i.V,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,r.jsx)(s.m,{fillColor:o.fk(),label:"materializations"===t?"0 materializations requested":"0 runs requested"});if("runKeys"in n&&n.runKeys.length){let e="".concat(n.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in n&&n.skipReason)return(0,r.jsx)(l.u,{position:"right",content:n.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(i.V,{intent:"danger",children:"Failure"}),n.error?(0,r.jsx)(d.Z,{onClick:()=>{v(!0)},children:"View"}):null]});case m.izS.SUCCESS:let h="materializations"===t?n.requestedAssetMaterializationCount:n.runIds.length,x=(0,r.jsxs)(i.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in n&&n.runKeys.length>n.runIds.length){let e="".concat(n.runKeys.length," runs requested, but ").concat(n.runKeys.length-n.runIds.length," skipped because the runs already exist for those requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:x})}return x}},[g,n,t]);return(0,r.jsxs)(r.Fragment,{children:[f,n.error?(0,r.jsxs)(u.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(p.T9,{error:n.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(h.zx,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}}}]);
//# sourceMappingURL=1445.2eb48ea85bea0995.js.map