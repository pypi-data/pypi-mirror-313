- name: Test starting from bams (dryrun)
  command: snparcher run --samples test/start_from_bams/bams.csv --reference test/data/genome/local_genome.fna.gz -F -n
  stdout:
    contains:
      - all                           1
      - concat_gvcfs                  1
      - create_gvcf_intervals         1
      - format_interval_list          1
      - index_reference               1
      - picard_intervals              1
      - samtools_sequence_dict        1
      - total                         7
    must_not_contain:
      - "bwa_mem"
      - "fastp"

- name: Test starting from bams
  command: snparcher run --samples test/start_from_bams/bams.csv --reference test/data/genome/local_genome.fna.gz -F --cores 1
  files:
    - path: "gvcfs/sample1.g.vcf.gz"

- name: Test starting from fastq
  command: snparcher run --samples test/start_from_fastq/local.csv --reference test/data/genome/local_genome.fna.gz -F --cores 1
  files:
    - path: "gvcfs/sample1.g.vcf.gz"